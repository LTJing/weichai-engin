webpackJsonp([12],{"+XnL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),n=a("PJh5"),l=a.n(n),c=a("E4Tp"),r=a("BTaQ"),o=(a("//Fk"),a("2aIq"),a("xXZE")),h=(a("TVG1"),function(e){var t=e.isDaycheck,a=e.nameOrNum,i=e.assetNumber,s=e.pageNo,n=e.pageSize;return o.a.request({url:"/asset/list",params:{isDaycheck:t,nameOrNum:a,assetNumber:i,pageNumber:s,pageSize:n},method:"get"})}),u={name:"asset-select",data:function(){return{options:[],optionMap:{},item:{}}},props:{value:String,placeholder:String,type:String},model:{prop:"value",event:"selection"},watch:{type:function(){this.loadTreeData()}},methods:{loadTreeData:function(){var e=this;h({isDaycheck:1}).then(function(t){var a={};e.options=(t.data.result||[]).map(function(e){return a[e.id]=e,{value:e.id+"",label:""+e.assetName}}),e.options.length>0?e.item=e.options[0]:e.item={},e.$emit("selec",e.item),e.optionMap=a})},onSelectionChange:function(e){this.$emit("selection",e),this.$emit("on-selection-change",this.optionMap[e])}},mounted:function(){this.loadTreeData()},components:{Select:r.Select}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticClass:"asset-select",attrs:{filterable:!0,value:e.value,filterable:"",placeholder:e.placeholder},on:{input:e.onSelectionChange}},e._l(e.options,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(e){a("U8yd")},"data-v-0ff0c341",null).exports,d={components:{CommonLoading:c.a,AssetSelect:p},i18n_prefix:"page.report-info",data:function(){return{cardName:"",searchName:"",assetList:[],name:"",assetNumber:"",timeRange:l()().format("YYYY-MM"),searchOp:"",opList:[],reportList:[],marginLeft:0,num:31,pre:1,tableColumns:[],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},items:[],isQuerying:!1}},computed:{},watch:{},methods:{select:function(e){this.name=e.label},getType:function(){var e=this;h({isDaycheck:1}).then(function(t){t.data.result.length>0&&(e.assetList=(t.data.result||[]).map(function(e){return{value:e.id+"",label:""+e.assetName}}),e.assetList.length>0&&(e.searchName=e.assetList[0].value,e.name=e.assetList[0].label,e.searchName&&e.loadTableData()))}).finally(function(){})},scrollLeft:function(){this.pre=document.body.clientWidth/1920,this.marginLeft!==0*this.pre?this.marginLeft=this.marginLeft+983*this.pre:this.marginLeft=0},loadTableData:function(e){var t=this;if(console.log(1111,this.searchName),this.timeRange)if(this.searchName){this.assetNumber=this.name,e&&(this.pageInfo.pageIndex=1),this.isQuerying=!0;var a,i,n;new Date(l()(l()(this.timeRange[1])).format("YYYY"),l()(l()(this.timeRange)).format("M"),0);(a={checkDate:l()(this.timeRange).format("YYYY-MM"),name:this.searchName},i=a.checkDate,n=a.name,o.a.request({url:"/checkRecord/listCheckRecord",params:{checkDate:i,assetId:n},method:"get"})).then(function(e){if(t.isQuerying=!1,null!=e.data){t.cardName=e.data.cardName||t.$t_p("default_card_name");new Date(l()(l()(t.timeRange[1])).format("YYYY"),l()(l()(t.timeRange)).format("M"),0);for(var a=[],i=1;i<t.num+1;i++)a.push(i);t.tableColumns=[].concat(a),t.tableData=(e.data.data||[]).map(function(e){return s()({},e)})}}).finally(function(){t.isQuerying=!1})}else this.$Message.info(this.$t_p("asset_placeholder"));else this.$Message.info(this.$t_p("time_placeholder"))},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)}},created:function(){},mounted:function(){this.getType()}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-info"},[e._m(0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isQuerying,expression:"!isQuerying"}],staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-input"},[a("Select",{staticClass:"filter-input",attrs:{"label-in-value":"",filterable:"",placeholder:e.$t_p("asset_placeholder")},on:{"on-change":e.select},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},e._l(e.assetList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("div",{staticClass:"filter-input"},[a("DatePicker",{staticStyle:{width:"260px","margin-right":"20px"},attrs:{type:"month",placeholder:"请选择月份"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{attrs:{type:"primary",loading:e.isQuerying},on:{click:function(t){e.loadTableData(!0)}}},[e._v(e._s(e.$t("common.message.query"))+"\n        ")])],1)]),e._v(" "),a("div",{staticClass:"title"},[a("span",[e._v(e._s(e.assetNumber)+"-"+e._s(e.cardName||"--"))]),e._v(" "),a("div",{staticClass:"title-right"},[a("span",{staticClass:"icon icon-check"}),e._v(e._s(e.$t_p("normal_legend"))+"\n        "),a("span",{staticClass:"icon icon-remove"}),e._v(e._s(e.$t_p("op_err_legend"))+"\n        "),a("span",{staticClass:"icon icon-del"}),e._v(e._s(e.$t_p("repair_err_legend"))+"\n      ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length>0"}],staticClass:"user-table"},[a("div",{staticClass:"box"},[a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("div",{staticClass:"container-left"},[a("ul",{staticClass:"table-left"},[a("li",{staticClass:"table-li-1"},[e._v(e._s(e.$t_p("index_col")))]),e._v(" "),a("li",{staticClass:"table-li-2"},[e._v(e._s(e.$t_p("content_col")))]),e._v(" "),a("li",{staticClass:"table-li-3"},[e._v(e._s(e.$t_p("time_col")))])]),e._v(" "),e._l(e.tableData,function(t,i){return e.tableData.length>0?a("ul",{staticClass:"table-left"},[a("li",{staticClass:"table-li-1",style:{"line-height":1*t.opTime.length+"rem",height:1*t.opTime.length+"rem"}},[e._v(e._s(t.number)+"\n              ")]),e._v(" "),a("li",{staticClass:"table-li-2",style:{height:1*t.opTime.length+"rem"}},[a("p",[e._v(e._s(t.content))])]),e._v(" "),a("li",{staticClass:"table-li-3",style:{height:1*t.opTime.length+"rem"}},[a("ul",{staticClass:"box-time-box"},e._l(t.opTime,function(t){return a("li",[e._v("\n                    "+e._s(e.$t_p(1==t.time?"morning_time":2==t.time?"lunch_time":"night_time"))+"\n                  ")])}),0)])]):e._e()})],2),e._v(" "),a("div",{staticClass:"container-right"},[a("ul",{staticClass:"table-right"},e._l(e.tableColumns||[],function(t,i){return a("li",[e._v(e._s(i+1))])}),0),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length>0"}],staticClass:"table-right"},e._l(e.tableData,function(t,i){return a("li",{staticClass:"list-2"},e._l(t.opTime,function(t){return a("ul",{staticClass:"list-ul"},e._l(t.checkList,function(e){return a("li",{class:1==e.check?"body-icon-check":2==e.check?"body-icon-del":3==e.check?"body-icon-remove":"body-icon"})}),0)}),0)}),0),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:0==e.tableData.length,expression:"tableData.length==0"}],staticClass:"table-right",staticStyle:{height:"70px","line-height":"70px"}},[e._v(e._s(e.$t_p("no_data"))+"\n            ")])])])])])]),e._v(" "),e.isQuerying?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-sub"},[t("div",{staticClass:"title"},[t("div",{staticClass:"breadcrumb-item-link"},[this._v("点检报表")]),this._v(" "),t("span",{staticClass:"empty"}),this._v(" "),t("span",{staticClass:"t-btn"})])])}]};var v=a("VU/8")(d,_,!1,function(e){a("Uqr3"),a("QAwD")},"data-v-819ca194",null).exports;t.default=v},QAwD:function(e,t){},U8yd:function(e,t){},Uqr3:function(e,t){}});
//# sourceMappingURL=12.c3deec56761298dbeb19.js.map