webpackJsonp([4],{"6NFB":function(e,t){},DID9:function(e,t){},NiiW:function(e,t){},PMPc:function(e,t){},Q6ti:function(e,t){},Vzzd:function(e,t){},aqyn:function(e,t){},dHkB:function(e,t){},hd56:function(e,t,a){"use strict";var i=a("Dd8w"),n=a.n(i),s=a("mvHQ"),o=a.n(s),l=a("BO1k"),r=a.n(l),c=a("526/"),d=a("jpo7"),u=a("G8pB"),m=a("xV2B"),f={components:{StatusSelect:c.a,LaboratoryList:d.a,customDrawer:u.a},data:function(){var e=this;return{deviceList:[],search:{pointType:"",alias:"",itemName:""},pageInfo:{loading:!1,pageIndex:1,pageSize:10,totalElements:30},typeList:[{name:"电压",value:"VOLTAGE"},{name:"功率",value:"POWER"},{name:"流量",value:"FLOW"},{name:"温度",value:"TEMPERATURE"},{name:"压力",value:"PRESSURE"},{name:"电流",value:"CURRENT"}],tableData:[],maxlength:50,tableColumns:[{title:"序号",key:"itemId",align:"left",width:100},{title:"机组名称",key:"deviceName",align:"left",ellipsis:!0,tooltip:!0,width:200},{title:"测点名称",key:"itemName",align:"left",width:120},{title:"中文名称",key:"chineseName",align:"left",ellipsis:!0,tooltip:!0},{title:"英文名称",key:"engName",align:"left"},{title:"子系统",key:"subChildName",align:"left"},{title:"关联虚拟测点",key:"virtualTag",align:"left"},{title:"测点描述",key:"alias",align:"left",width:180,ellipsis:!0,tooltip:!0},{title:"公式",key:"formula",align:"left"},{title:"测点类型",key:"pointType",align:"left",render:function(t,a){var i=!0,n=!1,s=void 0;try{for(var o,l=r()(e.typeList);!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.value===a.row.pointType)return t("span",c.name)}}catch(e){n=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}}},{title:"操作",key:"action",width:100,align:"left",render:function(t,a){return t("div",[t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.showDrawer("edit",a.row)}}},"编辑")])}}],currentIndex:0,title:"",formList:[{label:"测点名称",type:"input",value:"itemName",placeholder:"请输入测点名称"},{label:"测点类型",type:"select",value:"pointType",data:[]},{label:"公式",type:"textarea",value:"formula",placeholder:"请输入公式"},{label:"关联虚拟测点",type:"select",value:"virtualTag",data:[]},{label:"测点描述",type:"input",value:"alias",placeholder:"请输入测点描述"},{label:"英文名称",type:"input",value:"engName",placeholder:"请输入英文名称"},{label:"中文名称",type:"input",value:"chineseName",placeholder:"请输入中文名称"},{label:"设备名称",type:"select",value:"deviceId",data:[]},{label:"子系统名称",type:"input",value:"subChildName",placeholder:"请输入子系统名称"}],formValue:{},formValidate:{itemName:[{required:!0,message:"测点名称不能为空"}],alias:[{required:!0,message:"测点描述不能为空"}]},type:""}},methods:{selectTree:function(e){this.formValue.addr=e},getType:function(){var e=this;this.formList[1].data=this.typeList,Object(m.N)().then(function(t){200===t.code&&(e.deviceList=t.data.map(function(e){return{name:e.deviceName,value:e.deviceId}}),e.formList[7].data=t.data.map(function(e){return{name:e.deviceName,value:e.deviceId}}))}),Object(m.Z)().then(function(t){200===t.code&&(e.formList[3].data=t.data.map(function(e){return{name:e,value:e}}))})},loadTableData:function(e){var t=this,a=this.pageInfo,i=a.pageSize,n=a.pageIndex,s=this.search,o=s.alias,l=s.pointType,r=s.itemName,c=s.deviceId;this.pageInfo.loading=!0,e&&(this.pageInfo.pageIndex=1),Object(m.Q)({pageSize:i,pageNumber:n,alias:o,pointType:l,itemName:r,deviceId:c}).then(function(e){200===e.code?(t.tableData=e.data.result,t.pageInfo.totalElements=e.data.totalElements,t.pageInfo.loading=!1):(t.tableData=[],t.pageInfo.totalElements=0,t.pageInfo.loading=!1)})},showDrawer:function(e,t){if("delete"!==e){if("add"===e)this.title="新增自定义测点",this.formValue={},this.formValue.virtualTag="YES";else{var a=JSON.parse(o()(t));console.log(a),this.title="编辑测点",this.formValue=a,this.formValue.deviceId=Number(a.deviceId),this.formValue.virtualTag=a.virtualTag||"NO"}this.type=e,this.$refs.drawer.open()}},onRowClick:function(){},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},rowClassName:function(e,t){if(e.id==this.currentIndex)return"demo-table-info-row"},confirm:function(){var e=this;if(this.formValue.state=this.formValue.deviceStatus,this.formValue.deviceId=this.formValue.deviceId.toString(),!this.formValue.deviceName){var t=!0,a=!1,i=void 0;try{for(var s,o=r()(this.deviceList);!(t=(s=o.next()).done);t=!0){var l=s.value;l.value===this.formValue.deviceId&&(this.formValue.deviceName=l.name)}}catch(e){a=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw i}}}"edit"===this.type?Object(m.j)(n()({},this.formValue)).then(function(t){var a=t.code,i=t.msg;200===a?(e.$Message.success(e.$t("common.message.edit_success")),e.loadTableData(),e.$refs.drawer.close()):e.$Message.warning(i)}):Object(m.b)(n()({},this.formValue)).then(function(t){var a=t.code,i=t.msg;200===a?(e.$Message.success(e.$t("common.message.add_success")),e.loadTableData(),e.$refs.drawer.close()):e.$Message.warning(i)})}},mounted:function(){this.loadTableData(),this.getType()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-select mr-12"},[a("Input",{attrs:{placeholder:"输入测点名称",clearable:""},model:{value:e.search.itemName,callback:function(t){e.$set(e.search,"itemName",t)},expression:"search.itemName"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("Input",{attrs:{placeholder:"输入测点描述",clearable:""},model:{value:e.search.alias,callback:function(t){e.$set(e.search,"alias",t)},expression:"search.alias"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("Select",{attrs:{placeholder:"选择测点类型",clearable:""},model:{value:e.search.pointType,callback:function(t){e.$set(e.search,"pointType",t)},expression:"search.pointType"}},e._l(e.typeList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("Select",{attrs:{placeholder:"选择设备",clearable:""},model:{value:e.search.deviceId,callback:function(t){e.$set(e.search,"deviceId",t)},expression:"search.deviceId"}},e._l(e.deviceList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{attrs:{type:"default",loading:e.pageInfo.loading},on:{click:function(t){e.loadTableData()}}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{stripe:"",loading:e.pageInfo.loading,columns:e.tableColumns,"row-class-name":e.rowClassName,data:e.tableData},on:{"on-row-click":e.onRowClick}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{selectTree:e.selectTree,confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)])},staticRenderFns:[]};var h=a("VU/8")(f,p,!1,function(e){a("PMPc")},"data-v-86d9523e",null);t.a=h.exports},"i0K/":function(e,t){},tJXZ:function(e,t){},ueBU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("RWfK"),n=a("woOf"),s=a.n(n),o=a("Dd8w"),l=a.n(o),r=a("xXZE"),c=a("G8pB"),d={name:"device-type-manage",components:{customDrawer:c.a},data:function(){var e=this;return{formFilter:{typeName:""},title:"",modalNew:!1,formValue:{},formList:[{type:"input",label:"设备类型",placeholder:"请输入设备类型",value:"typeName"},{type:"input",label:"设备编码",placeholder:"请输入设备编码",value:"typeCode"},{type:"textarea",label:"备注",placeholder:"请输入备注内容",value:"description"}],formValidate:{typeName:[{required:!0,message:"设备类型不能为空",trigger:"blur"}],typeCode:[{required:!0,message:"设备编码不能为空",trigger:"blur"}]},loading1:!1,loading2:!1,loading:!1,serLoading:!1,tableColumns:[{title:"设备类型",key:"typeName",align:"left"},{title:"类型编码",key:"typeCode",align:"left"},{title:"描述",key:"description",align:"left"},{title:"操作",key:"action",width:200,align:"left",render:function(t,a){return t("div",[e.$hasAccess("type.edit")&&t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.editInfo(a)}}},"编辑"),e.$hasAccess("type.del")&&t("span",{class:"secondary",style:{color:"#F12121"},on:{click:function(){e.deleteInfo(a.row)}}},"删除")])}}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},type:""}},methods:{showColumn:function(){this.$hasAccess("type.edit")||this.$hasAccess("type.del")||this.tableColumns.splice(this.tableColumns.length-1,1)},clickshow:function(){this.$refs.drawer.open(),this.title="新建设备类型",this.type="add",this.formValue={typeName:"",typeCode:"",description:""}},handleSearch:function(){},handleReset:function(e){this.$refs[e].resetFields()},getType:function(){this.serLoading=!0,this.loading=!0,this.pageInfo.pageIndex=1,this.loadTableData()},addCancel:function(){this.modalNew=!1},addSet:function(){var e=this;(this.loading1=!0,this.formValue.id)?function(e){var t={id:e.id,typeName:e.typeName,typeCode:e.typeCode,description:e.description};return r.a.request({url:"equipmentType/editEquipmentType",data:t,method:"post"})}(this.formValue).then(function(t){e.loading1=!1,e.modalNew=!1,200===t.code?(e.$Message.info(e.$t("common.message.edit_success")),e.$refs.drawer.close(),e.loadTableData()):1e3==t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.edit_fail"))}):function(e){var t={typeName:e.typeName,typeCode:e.typeCode,description:e.description};return r.a.request({url:"equipmentType/addEquipmentType",data:t,method:"post"})}({description:this.formValue.description,typeCode:this.formValue.typeCode,typeName:this.formValue.typeName}).then(function(t){e.loading1=!1,200===t.code?(e.$Message.success(e.$t("common.message.add_success")),e.modalNew=!1,e.$refs.drawer.close(),e.loadTableData()):1e3==t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.add_fail"))})},loadTableData:function(e){var t,a,i=this;e&&(this.pageInfo.pageIndex=1),this.loading=!0,(t={typeName:this.formFilter.typeName,pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize},a={pageSize:t.pageSize,pageNumber:t.pageNumber,typeName:t.typeName},r.a.request({url:"equipmentType/listEquipmentType",params:a,method:"get"})).then(function(e){i.loading=!1,i.serLoading=!1,i.tableData=(e.data.result||[]).map(function(e){return l()({},e)}),i.pageInfo.totalElements=e.data.totalElements||0})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},editInfo:function(e){this.formValue=s()({},e.row),this.title="编辑设备类型",this.type="edit",this.$refs.drawer.open()},deleteInfo:function(e){var t=this;this.$Modal.confirm({title:this.$t("common.text.prompt"),width:this.$flexible(450),content:this.$t("common.text.confirm_title",{name:this.$t("common.text.device_type")})+"["+e.typeName+"]的设备类型吗?",onOk:function(){var a,i;(a={id:e.id},i={id:a.id,typeName:a.typeName,typeCode:a.typeCode,description:a.description},r.a.request({url:"equipmentType/delEquipmentType",data:i,method:"post"})).then(function(e){200===e.code?(t.$Message.success(t.$t("common.message.delete_success")),t.loadTableData()):1e3===e.code?t.$Message.warning(e.msg):t.$Message.warning(t.$t("common.message.delete_fail"))})}})},confirm:function(e){e?this.addSet():this.isBtnLoading=!1}},mounted:function(){this.loadTableData(!0),this.showColumn()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device-type-manage"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input"},[a("Input",{attrs:{placeholder:"请输入设备类型",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getType()}},model:{value:e.formFilter.typeName,callback:function(t){e.$set(e.formFilter,"typeName",t)},expression:"formFilter.typeName"}})],1),e._v(" "),a("div",{staticClass:"filter-btn half-border"},[a("Button",{staticClass:"search-btn",attrs:{loading:e.serLoading,type:"default"},on:{click:function(t){e.getType()}}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{staticClass:"btn-create",attrs:{type:"default"},on:{click:e.clickshow}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{loading:e.loading,stripe:"","row-class-name":function(e,t){return t%2==1?"even":""},columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)]),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(e){a("i0K/")},"data-v-bccbb1cc",null).exports,f=a("526/"),p=(a("2aIq"),a("xV2B")),h={name:"device-model-manage",components:{StatusSelect:f.a,customDrawer:c.a},data:function(){var e=this;return{formFilter:{name:"",typeId:""},serLoading:!1,loading:!1,searchKey:[],tableColumns:[{title:"设备型号",key:"modelName",align:"left"},{title:"设备类型",key:"typeName",align:"left"},{title:"设备制造商",key:"manufacturerName",align:"left"},{title:"描述",key:"description",align:"left"},{title:"操作",key:"action",width:200,align:"left",render:function(t,a){return t("div",[e.$hasAccess("model.query")&&t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.showDrawer("detail",a)}}},"编辑"),e.$hasAccess("model.del")&&t("span",{class:"secondary",style:{color:"#F12121"},on:{click:function(){e.deleteInfo(a.row)}}},"删除")])}}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},type:"",title:"",formList:[{label:"设备型号",type:"input",value:"modelName"},{label:"设备类型",type:"select",value:"typeName",data:[]},{label:"设备制造商",type:"select",value:"manufacturerName",data:[]},{label:"备注",type:"textarea",value:"description"}],formValue:{},formValidate:{modelName:[{required:!0,message:"设备型号不能为空",trigger:"blur"}],typeName:[{required:!0,message:"请选择设备类型",trigger:"change",type:"number"}],manufacturerName:[{required:!0,message:"请选择设备制造商",trigger:"change",type:"number"}],errorOrder:[{required:!0,message:"请选择工单审批",trigger:"change"}],template:[{required:!0,message:"请选择报告模板",trigger:"change",type:"number"}],maintainOrder:[{required:!0,message:"请选择工单审批",trigger:"change"}]},id:0}},methods:{handleReset:function(e){this.$refs[e].resetFields()},handleSearch:function(){this.serLoading=!0,this.pageInfo.pageIndex=1,this.loadTableData()},loadTableData:function(e){var t=this;this.loading=!0,e&&(this.pageInfo.pageIndex=1),this.pageInfo.totalElements=this.tableData.length,function(e){var t=e.pageNumber,a=e.pageSize,i={pageNumber:t,name:e.name,typeId:e.typeId,pageSize:a};return r.a.request({url:"equipmentModel/listEquipmentModel",params:i,method:"get"})}({pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize,name:this.formFilter.name,typeId:this.formFilter.typeId}).then(function(e){t.tableData=(e.data.result||[]).map(function(e){return l()({},e)}),t.pageInfo.totalElements=e.data.totalElements||0,t.loading=!1,t.serLoading=!1})},loadType:function(){var e,t=this;r.a.request({url:"equipmentType/listEquipmentType",params:e,method:"get"}).then(function(e){200===e.code&&(t.formList[1].data=e.data.result.map(function(e){return{name:e.typeName,value:e.id}}))}),Object(p.J)().then(function(e){200===e.code&&(t.formList[2].data=e.data.map(function(e){return{name:e.manufactruer,value:e.id}}))})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},deleteInfo:function(e){var t=this;this.$Modal.confirm({title:this.$t("common.text.prompt"),width:this.$flexible(450),content:this.$t("common.text.confirm_title",{name:this.$t("common.text.device_model")})+"["+e.modelName+"]的设备型号吗?",onOk:function(){var a,i;(a={id:e.id},i={id:a.id},r.a.request({url:"equipmentModel/delEquipmentModel",data:i,method:"post"})).then(function(e){200===e.code?(t.$Message.success(t.$t("common.message.delete_success")),t.loadTableData()):t.$Message.warning(e.msg)})}})},showDrawer:function(e,t){var a,i,n=this;if(this.type=e,this.$refs.drawer.open(),"add"===e)this.title="新建设备型号";else{var s=t.row;this.title="编辑设备型号",this.id=s.id,(a={id:s.id},i=a.id,r.a.request({url:"equipmentModel/"+i,params:{},method:"get"})).then(function(e){if(200===e.code){var t=e.data;n.formValue={modelName:s.modelName,typeName:t.typeId,manufacturerName:t.manufacturerId,description:s.description}}})}},add:function(){},confirm:function(e){var t,a=this,i=l()({},this.formValue,{typeId:this.formValue.typeName,manufacturerId:this.formValue.manufacturerName});e&&("add"===this.type?(t=i,r.a.request({url:"equipmentModel/addEquipmentModel",data:t,method:"post"})).then(function(e){200===e.code?(a.$Message.success(e.msg),a.$refs.drawer.close(),a.loadTableData()):a.$Message.warning(e.msg)}):function(e){return r.a.request({url:"equipmentModel/editEquipmentModel",data:e,method:"post"})}(l()({},i,{id:this.id})).then(function(e){200===e.code?(a.$Message.success(e.msg),a.$refs.drawer.close(),a.loadTableData()):a.$Message.warning(e.msg)}))}},mounted:function(){this.loadTableData(!0),this.loadType()}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device-model-manage"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input mr-12"},[a("Input",{attrs:{placeholder:"请输入设备型号",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.formFilter.name,callback:function(t){e.$set(e.formFilter,"name",t)},expression:"formFilter.name"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{clearable:"",type:1,placeholder:"请选择设备类型"},model:{value:e.formFilter.typeId,callback:function(t){e.$set(e.formFilter,"typeId",t)},expression:"formFilter.typeId"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{staticClass:"search-btn",attrs:{loading:e.serLoading,type:"default"},on:{click:e.handleSearch}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{"row-class-name":function(e,t){return t%2==1?"even":""},stripe:"",loading:e.loading,columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)]),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)},staticRenderFns:[]};var v=a("VU/8")(h,g,!1,function(e){a("tJXZ")},"data-v-1c218526",null).exports,y=a("mvHQ"),b=a.n(y),C={name:"device-manufacture-manage",components:{customDrawer:c.a},data:function(){var e=this;return{type:"",formList:[{label:"制造商名",type:"input",value:"manufactruer"},{label:"联系人",type:"input",value:"contact"},{label:"联系电话",type:"input",value:"phone"},{label:"邮箱",type:"input",value:"email"},{label:"传真",type:"input",value:"fax"},{label:"地址",type:"input",value:"address"},{label:"备注",type:"textarea",value:"description"}],formValue:{},formValidate:{manufactruer:[{required:!0,message:"设备制造商不能为空",trigger:"blur"}],contact:[{required:!0,message:"联系人不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"},{validator:function(e,t,a){if(t){/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$|400[0-9]{7}|^800[0-9]{7}/.test(t)?a():a("电话格式错误")}else a()},trigger:"blur"}]},loading1:!1,formFilter:{name:""},loading:!1,searchKey:[],title:"",tableColumns:[{title:"设备制造商",key:"manufactruer",align:"left"},{title:"联系人",key:"contact",align:"left"},{title:"联系电话",key:"phone",align:"left"},{title:"传真",key:"fax",align:"left"},{title:"邮箱",key:"email",align:"left"},{title:"地址",key:"address",align:"left"},{title:"操作",key:"action",width:200,align:"left",render:function(t,a){return t("div",[e.$hasAccess("maker.edit")&&t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.showDrawer("edit",a)}}},"编辑"),e.$hasAccess("maker.del")&&t("span",{class:"secondary",style:{color:"#F12121"},on:{click:function(){e.deleteInfo(a.row)}}},"删除")])}}],serLoading:!1,tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0}}},methods:{addItem:function(){this.title="新增设备制造商",this.formValue={},this.showDrawer=!0},addSet:function(){var e,t,a=this;this.loading1=!0,this.formValue.id?(e=l()({},this.formValue),t={id:e.id,manufactruer:e.manufactruer,contact:e.contact,phone:e.phone,email:e.email,fax:e.fax,address:e.address,remarks:e.remarks},r.a.request({url:"equipment/editEquipment",data:t,method:"post"})).then(function(e){a.loadTableData(),a.loading1=!1,200===e.code?(a.$Message.success(a.$t("common.message.edit_success")),a.$refs.drawer.close()):a.$Message.warning(a.$t("common.message.edit_fail")+":"+e.msg)}):function(e){var t={manufactruer:e.manufactruer,contact:e.contact,phone:e.phone,email:e.email,fax:e.fax,address:e.address,remarks:e.remarks};return r.a.request({url:"equipment/addEquipment",data:t,method:"post"})}(l()({},this.formValue)).then(function(e){a.loadTableData(),a.loading1=!1,200===e.code?(a.$Message.success(a.$t("common.message.add_success")),a.$refs.drawer.close()):a.$Message.warning(a.$t("common.message.add_fail")+":"+e.msg)})},showColumn:function(){this.$hasAccess("maker.edit")||this.$hasAccess("maker.del")||this.tableColumns.splice(this.tableColumns.length-1,1)},handleReset:function(e){this.$refs[e].resetFields()},handleSearch:function(){this.serLoading=!0,this.pageInfo.pageIndex=1,this.loadTableData()},loadTableData:function(e){var t=this;this.loading=!0,e&&(this.pageInfo.pageIndex=1),this.searchKey=this.tableData.map(function(e){return e.deviceType}),function(e){var t={pageNumber:e.pageNumber,pageSize:e.pageSize,name:e.name};return r.a.request({url:"equipment/listEquipment",params:t,method:"get"})}({pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize,name:this.formFilter.name}).then(function(e){t.loading=!1,t.serLoading=!1,t.tableData=(e.data.result||[]).map(function(e){return l()({},e)}),t.pageInfo.totalElements=e.data.totalElements||0})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},editInfo:function(e){this.formValue=l()({},e.row),this.showDrawer=!0},confirm:function(e){e?this.addSet():this.loading1=!1},deleteInfo:function(e){var t=this;this.$Modal.confirm({title:this.$t("common.text.prompt"),width:this.$flexible(450),content:"确认删除名称为["+e.manufactruer+"]的设备制造商吗?",onOk:function(){var a,i;(a={id:e.id},i={id:a.id},r.a.request({url:"equipment/delEquipment",data:i,method:"post"})).then(function(e){200===e.code?(t.$Message.success(t.$t("common.message.delete_success")),t.loadTableData()):1e3===e.code?t.$Message.warning(e.msg):t.$Message.warning(t.$t("common.message.delete_fail"))})}})},showDrawer:function(e,t){if(this.type=e,this.$refs.drawer.open(),"add"===e)this.title="新建设备制造商",this.formValue={manufactruer:"",contact:"",phone:"",email:"",fax:"",address:"",description:""};else{this.title="编辑设备制造商";var a=JSON.parse(b()(t.row));this.formValue=a}}},mounted:function(){this.loadTableData(!0),this.showColumn()}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device-manufacture-manage"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input mr-12"},[a("Input",{attrs:{placeholder:"请输入制造商名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.formFilter.name,callback:function(t){e.$set(e.formFilter,"name",t)},expression:"formFilter.name"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{staticClass:"search-btn",attrs:{loading:e.serLoading,type:"default"},on:{click:e.handleSearch}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{"row-class-name":function(e,t){return t%2==1?"even":""},stripe:"",loading:e.loading,columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)]),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)},staticRenderFns:[]};var I=a("VU/8")(C,w,!1,function(e){a("aqyn")},"data-v-224d5f70",null).exports,$=a("hd56"),T=a("jpo7"),k={components:{StatusSelect:f.a,LaboratoryList:T.a,customDrawer:c.a},data:function(){var e=this;return{search:{deviceType:"",deviceName:"",deviceCode:""},formValidate:{},pageInfo:{loading:!1,pageIndex:1,pageSize:10,totalElements:30},tableData:[],maxlength:50,tableColumns:[{title:"设备名称",key:"deviceName",align:"left"},{title:"设备类型",key:"deviceTypeName",align:"left"},{title:"设备编号",key:"deviceCode",align:"left"},{title:"控制程序类型",key:"programType",align:"left"},{title:"控制程序名称",key:"programName",align:"left"},{title:"控制程序版本",key:"programVersion",align:"left"},{title:"更新时间",key:"createTime",align:"left"},{title:"操作",key:"action",width:200,align:"left",render:function(t,a){return t("div",[t("span",{style:{color:"rgba(0, 132, 255, 1)"},on:{click:function(){}}},"程序上传并更新"),t("span",{class:"secondary",style:{color:"rgba(0, 132, 255, 1)"},on:{click:function(){e.showDrawer("edit",a.row)}}},"编辑")])}}],type:"",currentIndex:0,title:"",formList:[{label:"设备名称",type:"select",value:"deviceName",disabled:"edit"===this.type,data:[]},{label:"设备类型",type:"select",value:"deviceType",disabled:!0,data:[]},{label:"设备编号",type:"select",value:"deviceCode",disabled:!0,data:[]},{label:"控制程序类型",type:"input",value:"programType"},{label:"控制程序名称",type:"input",value:"programName"},{label:"控制程序版本",type:"input",value:"programVersion"}],formValue:{},info:[]}},mounted:function(){this.loadTableData(),this.getType()},methods:{changeSelect:function(e){this.formValue.deviceName=e,this.formValue.deviceType=e,this.formValue.deviceCode=e},getType:function(){var e=this;Object(p.z)().then(function(t){var a=t.code,i=t.data;200===a&&(e.info=i||[],e.formList[0].data=i.map(function(e){return{name:e.deviceName,value:e.id}}),e.formList[1].data=i.map(function(e){return{name:e.typeName,value:e.id}}),e.formList[2].data=i.map(function(e){return{name:e.deviceCode,value:e.id}}))})},loadTableData:function(){var e=this,t=this.pageInfo,a=t.pageIndex,i=t.pageSize;this.pageInfo.loading=!0,Object(p.R)(l()({pageNumber:a,pageSize:i},this.search)).then(function(t){var a=t.code,i=t.data;e.pageInfo.loading=!1,200===a&&(e.tableData=i.result,e.pageInfo.totalElements=i.totalElements)})},showDrawer:function(e,t){if("add"===e)this.title="新建控制程序",this.formValue={},this.formList[0].disabled=!1;else{var a=JSON.parse(b()(t));this.title="编辑控制程序",this.formValue=a,this.formValue.deviceName=a.deviceId,this.formValue.deviceType=a.deviceId,this.formValue.deviceCode=a.deviceId,this.formList[0].disabled=!0}this.type=e,this.$refs.drawer.open()},onRowClick:function(){},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},rowClassName:function(e,t){if(e.id==this.currentIndex)return"demo-table-info-row"},uploadAndUpdate:function(){},detailInfo:function(){},confirm:function(){var e=this,t=this.formValue.deviceName,a=this.info;for(var i in a){var n=a[i];n.id===t&&(this.formValue.deviceName=n.deviceName,this.formValue.deviceType=n.deviceType,this.formValue.deviceCode=n.deviceCode,this.formValue.deviceId=n.id)}"add"===this.type?Object(p.c)(l()({},this.formValue)).then(function(t){200===t.code?(e.$Message.success(e.$t("common.message.add_success")),e.loadTableData(),e.$refs.drawer.close()):1e3===t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.add_fail"))}):Object(p._6)(l()({},this.formValue)).then(function(t){200===t.code?(e.$Message.success(e.$t("common.message.edit_success")),e.loadTableData(),e.$refs.drawer.close()):1e3===t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.edit_fail"))})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备类型",filterable:!0,type:1},model:{value:e.search.deviceType,callback:function(t){e.$set(e.search,"deviceType",t)},expression:"search.deviceType"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备名称",filterable:!0,type:2},model:{value:e.search.deviceName,callback:function(t){e.$set(e.search,"deviceName",t)},expression:"search.deviceName"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备编号",filterable:!0,type:3},model:{value:e.search.deviceCode,callback:function(t){e.$set(e.search,"deviceCode",t)},expression:"search.deviceCode"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{attrs:{type:"default",loading:e.pageInfo.loading},on:{click:e.loadTableData}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{stripe:"",loading:e.pageInfo.loading,columns:e.tableColumns,data:e.tableData},on:{"on-row-click":e.onRowClick}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{changeSelect:e.changeSelect,confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)])},staticRenderFns:[]};var V=a("VU/8")(k,N,!1,function(e){a("Vzzd")},"data-v-0d3d62c8",null).exports,S=a("Gu7T"),_=a.n(S),D=a("BTaQ"),x={name:"device-type-select",i18n_prefix:"component.device-type-select",data:function(){return{options:[],optionMap:{}}},props:{value:String,flag:Boolean,placeholder:String},model:{prop:"value",event:"selection"},methods:{loadTreeData:function(){var e=this,t={};Object(p.A)({}).then(function(a){if(e.options=(a.data.result||[]).map(function(e){return t[e.id]=e,{value:e.id+"",label:""+e.typeName}}),e.flag){var i=[{value:"",label:$t_p("lable")}];e.options=[].concat(i,_()(e.options))}e.optionMap=t})},onSelectionChange:function(e){this.$emit("selection",e),this.$emit("on-selection-change",this.optionMap[e])}},mounted:function(){this.loadTreeData()},components:{Select:D.Select}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticClass:"device-type-select",attrs:{value:e.value,placeholder:e.placeholder,clearable:""},on:{input:e.onSelectionChange}},e._l(e.options,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)},staticRenderFns:[]};var M=a("VU/8")(x,z,!1,function(e){a("Q6ti")},"data-v-cd823606",null).exports,L={name:"device-model-select",data:function(){return{options:[],optionMap:{}}},props:{value:String,placeholder:String,type:String},model:{prop:"value",event:"selection"},watch:{type:function(){this.loadTreeData()}},methods:{loadTreeData:function(){var e=this;this.type&&Object(p.x)({typeId:this.type}).then(function(t){var a={};e.options=(t.data.result||[]).map(function(e){return a[e.id]=e,{value:e.id+"",key:e.id+"",label:""+e.modelName}}),e.optionMap=a})},onSelectionChange:function(e){this.$emit("selection",e),this.$emit("on-selection-change",this.optionMap[e])}},mounted:function(){this.loadTreeData()},components:{Select:D.Select}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticClass:"device-model-select",attrs:{value:e.value,placeholder:e.placeholder},on:{input:e.onSelectionChange}},e._l(e.options,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)},staticRenderFns:[]};var q=a("VU/8")(L,E,!1,function(e){a("NiiW")},"data-v-003a9c7b",null).exports,F=function(e){var t={id:e.id};return r.a.request({url:"malfunctionInfo/delMalfunctionInfo",data:t,method:"post"})},O={name:"fault-code-manage",i18n_prefix:"page.fault-code-manage",components:{TypeSelect:M,ModelSelect:q,DeviceTypeSelect:M,DeviceModelSelect:q,deleteCodeInfo:F,customDrawer:c.a},data:function(){var e=this;return{formFilter:{name:""},title:"",serLoading:!1,formValue:{},loading:!1,formList:[{label:"故障代码",type:"input",value:"malCode"},{label:"故障名称",type:"input",value:"malName"},{label:"对比值",value:"compare",type:"input",inputType:"number"},{label:"等级",value:"level",type:"input",inputType:"number"},{label:"故障代码类型",type:"input",value:"malType"},{label:"备注",type:"textarea",value:"description"}],formValidate:{malCode:[{required:!0,message:"故障代码不能为空",trigger:"blur"}],malName:[{required:!0,message:"故障名称不能为空",trigger:"blur"}]},loadingNew:!0,loadingEdit:!0,modalNew:!1,modalEdit:!1,deviceType:[],deviceModel:[],tableColumns:[{title:"故障代码",key:"malCode",align:"left"},{title:"故障名称",key:"malName",align:"left"},{title:"故障代码类型",key:"malType",align:"left"},{title:"对比值",key:"compare",align:"left"},{title:"等级",key:"level",align:"left"},{title:"描述",key:"description",align:"left"},{title:"操作",key:"action",width:250,align:"left",render:function(t,a){return t("div",[e.$hasAccess("code.edit")&&t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.showDrawer("edit",a)}}},"编辑"),e.$hasAccess("code.del")&&t("span",{class:"secondary",style:{color:"#F12121"},on:{click:function(){e.deleteInfo(a.row)}}},"删除")])}}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},id:this.$route.params.id,type:""}},methods:{gotoView:function(e){var t=s()({},e.row);this.$router.push({name:"knowledge-detail",params:t})},showColumn:function(){this.$hasAccess("code.edit")||this.$hasAccess("code.del")||this.tableColumns.splice(this.tableColumns.length-1,1)},onDeviceTypeChange:function(e){this.formValue.modelId=""},passCancel:function(){this.modalNew=!1},onDeviceModelChange:function(e){},newClick:function(){this.title=this.$t_p("add_fault_code"),this.formValue={},this.modalNew=!0,this.$refs.formFilter.resetFields()},asyncOK:function(){var e,t=this;this.loadingNew=!0,this.formValue.id?(e=l()({},this.formValue),r.a.request({url:"malfunctionInfo/editMalfunctionInfo",data:e,method:"post"})).then(function(e){t.loadingNew=!1,t.modalNew=!1,200===e.code?(t.$Message.success(t.$t("common.message.edit_success")),t.loadTableData(),t.$refs.drawer.close()):1e3===e.code?t.$Message.warning(e.msg):t.$Message.warning(t.$t("common.message.edit_fail"))}):function(e){return r.a.request({url:"malfunctionInfo/addMalfunctionInfo",data:e,method:"post"})}(l()({},this.formValue)).then(function(e){t.loadingNew=!1,t.modalNew=!1,200===e.code?(t.$Message.success(t.$t("common.message.add_success")),t.loadTableData(),t.$refs.drawer.close()):1e3===e.code?t.$Message.warning(e.msg):t.$Message.warning(t.$t("common.message.add_fail"))})},handleSearch:function(){this.serLoading=!0,this.pageInfo.pageIndex=1,this.loadTableData()},loadTableData:function(e){var t=this;this.loading=!0,e&&(this.pageInfo.pageIndex=1),function(e){var t={pageSize:e.pageSize,pageNumber:e.pageNumber,name:e.name};return r.a.request({url:"malfunctionInfo/listMalfunctionInfo",params:t,method:"get"})}({pageSize:this.pageInfo.pageSize,pageNumber:this.pageInfo.pageIndex,name:this.formFilter.name}).then(function(e){t.loading=!1,t.serLoading=!1,t.tableData=(e.data.result||[]).map(function(e){return l()({},e)}),t.pageInfo.totalElements=e.data.totalElements||0})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},editInfo:function(e){var t=JSON.parse(b()(e));this.formValue=l()({},t,{modelId:e.row.modelId.toString(),typeId:e.row.typeId.toString()}),this.modalNew=!0},deleteInfo:function(e){var t=this;this.$Modal.confirm({title:this.$t("common.text.prompt"),width:this.$flexible(450),content:"确认删除故障代码["+e.malCode+"]吗?",onOk:function(){F({id:e.id}).then(function(){t.$Message.success(t.$t("common.message.delete_success")),t.loadTableData()},function(){t.$Message.warning(t.$t("common.message.delete_fail"))})}})},showDrawer:function(e,t){if(this.type=e,this.$refs.drawer.open(),"add"===e)this.title="新建设备型号",this.formValue={};else{var a=t.row,i=JSON.parse(b()(a));this.title="编辑设备型号",this.formValue=i}},confirm:function(e){e?this.asyncOK():this.isBtnLoading=!1},getType:function(){}},mounted:function(){this.showColumn(),this.getType(),this.loadTableData(!0)}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fault-code-manage"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input mr-12"},[a("Input",{attrs:{placeholder:"输入故障代码/故障名称",maxlength:50,clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.formFilter.name,callback:function(t){e.$set(e.formFilter,"name",t)},expression:"formFilter.name"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{staticClass:"search-btn",attrs:{loading:e.serLoading,type:"default"},on:{click:e.handleSearch}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{loading:e.serLoading,"row-class-name":function(e,t){return t%2==1?"even":""},stripe:"",columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{loading:e.loading,current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)])},staticRenderFns:[]};var B=a("VU/8")(O,P,!1,function(e){a("dHkB")},"data-v-7d9dcb24",null).exports,R={components:{StatusSelect:f.a,LaboratoryList:T.a,customDrawer:c.a},data:function(){var e=this;return{search:{deviceType:"",deviceName:"",deviceCode:""},pageInfo:{loading:!1,pageIndex:1,pageSize:10,totalElements:30},tableData:[],maxlength:50,tableColumns:[{title:"设备名称",key:"deviceName",align:"left"},{title:"设备类型",key:"deviceTypeName",align:"left"},{title:"设备编号",key:"deviceCode",align:"left"},{title:"配置文件类型",key:"fileType",align:"left"},{title:"配置文件名称",key:"fileName",align:"left"},{title:"配置文件版本",key:"fileVersion",align:"left"},{title:"更新时间",key:"createTime",align:"left"},{title:"操作",key:"action",width:220,align:"left",render:function(t,a){return t("div",[t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){}}},"文件上传并下发"),t("span",{class:"primary",style:{color:"#0084FF"},on:{click:function(){e.showDrawer("edit",a.row)}}},"编辑")])}}],currentIndex:0,title:"",formList:[{label:"设备名称",type:"select",value:"deviceName",data:[],disabled:"edit"===this.type},{label:"设备类型",type:"select",value:"deviceType",data:[],disabled:!0},{label:"设备编号",type:"select",value:"deviceCode",data:[],disabled:!0},{label:"配置文件类型",type:"input",value:"fileType"},{label:"配置文件名称",type:"input",value:"fileName"},{label:"配置文件版本",type:"input",value:"fileVersion"}],formValidate:{},formValue:{},type:"",info:[]}},mounted:function(){this.loadTableData(),this.getType()},methods:{changeSelect:function(e){this.formValue.deviceName=e,this.formValue.deviceType=e,this.formValue.deviceCode=e},getType:function(){var e=this;Object(p.z)().then(function(t){var a=t.code,i=t.data;200===a&&(e.info=i||[],e.formList[0].data=i.map(function(e){return{name:e.deviceName,value:e.id}}),e.formList[1].data=i.map(function(e){return{name:e.deviceType,value:e.id}}),e.formList[2].data=i.map(function(e){return{name:e.deviceCode,value:e.id}}))})},loadTableData:function(){var e=this,t=this.pageInfo,a=t.pageIndex,i=t.pageSize;this.pageInfo.loading=!0,Object(p.r)(l()({},this.search,{pageNumber:a,pageSize:i})).then(function(t){var a=t.code,i=t.data;e.pageInfo.loading=!1,200===a&&(e.tableData=i.result,e.pageInfo.totalElements=i.totalElements)})},showDrawer:function(e,t){if(this.type=e,"add"===e)this.title="新建配置文件",this.formValue={},this.formList[0].disabled=!1;else{var a=JSON.parse(b()(t));this.title="编辑配置文件",this.formValue=a,this.formValue.deviceName=a.deviceId,this.formValue.deviceType=a.deviceId,this.formValue.deviceCode=a.deviceId,this.formList[0].disabled=!0}this.$refs.drawer.open()},onRowClick:function(){},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},rowClassName:function(e,t){if(e.id==this.currentIndex)return"demo-table-info-row"},confirm:function(){var e=this,t=this.formValue.deviceName,a=this.info;for(var i in a){var n=a[i];n.id===t&&(this.formValue.deviceName=n.deviceName,this.formValue.deviceType=n.deviceType,this.formValue.deviceCode=n.deviceCode,this.formValue.deviceId=n.id)}"add"===this.type?Object(p.a)(l()({},this.formValue)).then(function(t){e.loadingNew=!1,e.modalNew=!1,200===t.code?(e.$Message.success(e.$t("common.message.add_success")),e.loadTableData(),e.$refs.drawer.close()):1e3===t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.add_fail"))}):Object(p._5)(l()({},this.formValue)).then(function(t){e.loadingNew=!1,e.modalNew=!1,200===t.code?(e.$Message.success(e.$t("common.message.edit_success")),e.loadTableData(),e.$refs.drawer.close()):1e3===t.code?e.$Message.warning(t.msg):e.$Message.warning(e.$t("common.message.edit_fail"))})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备类型",filterable:!0,type:1},model:{value:e.search.deviceType,callback:function(t){e.$set(e.search,"deviceType",t)},expression:"search.deviceType"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备名称",filterable:!0,type:2},model:{value:e.search.deviceName,callback:function(t){e.$set(e.search,"deviceName",t)},expression:"search.deviceName"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"选择设备编号",filterable:!0,type:3},model:{value:e.search.deviceCode,callback:function(t){e.$set(e.search,"deviceCode",t)},expression:"search.deviceCode"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{attrs:{type:"default",loading:e.pageInfo.loading},on:{click:e.loadTableData}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{stripe:"",loading:e.pageInfo.loading,columns:e.tableColumns,"row-class-name":e.rowClassName,data:e.tableData},on:{"on-row-click":e.onRowClick}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{changeSelect:e.changeSelect,confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)])},staticRenderFns:[]};var A=a("VU/8")(R,j,!1,function(e){a("6NFB")},"data-v-183ed9ac",null).exports,U=a("CCvC"),J={name:"platform",components:{tab:i.a,deviceTypeManage:m,deviceModelManage:v,deviceManufactureManage:I,softwareManage:V,pointManage:$.a,configList:A,faultCodeManage:B},mixins:[U.a],data:function(){return{tabList:[{id:1,name:"设备类型",com:m},{id:2,name:"设备型号",com:v},{id:3,name:"设备制造商",com:I},{id:4,name:"软件管理",com:V},{id:5,name:"测点配置",com:$.a},{id:6,name:"故障代码",com:B}],tabIndex:0,is:null}},created:function(){this.is=this.tabList[this.tabIndex].com},methods:{changeTab:function(e){console.log(e),this.tabIndex=e,this.is=this.tabList[e].com}}},K={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"platform"},[t("tab",{attrs:{data:this.tabList,current:this.tabIndex},on:{change:this.changeTab}}),this._v(" "),t("div",{staticClass:"content"},[t("transition",{attrs:{"enter-active-class":this.routerTransitionClass.enter,"leave-active-class":this.routerTransitionClass.leave}},[t(this.is,{tag:"component"})],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(J,K,!1,function(e){a("DID9")},"data-v-8cbfa0a8",null);t.default=Q.exports}});
//# sourceMappingURL=4.648ce730e7899468b3c1.js.map