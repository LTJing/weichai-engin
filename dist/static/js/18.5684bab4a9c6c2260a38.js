webpackJsonp([18],{PMPc:function(e,a){},QXsa:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("hd56");a.default=i.a},hd56:function(e,a,t){"use strict";var i=t("Dd8w"),l=t.n(i),n=t("mvHQ"),s=t.n(n),o=t("BO1k"),r=t.n(o),c=t("526/"),d=t("jpo7"),u=t("G8pB"),f=t("xV2B"),m={components:{StatusSelect:c.a,LaboratoryList:d.a,customDrawer:u.a},data:function(){var e=this;return{deviceList:[],search:{pointType:"",alias:"",itemName:""},pageInfo:{loading:!1,pageIndex:1,pageSize:10,totalElements:30},typeList:[{name:"电压",value:"VOLTAGE"},{name:"功率",value:"POWER"},{name:"流量",value:"FLOW"},{name:"温度",value:"TEMPERATURE"},{name:"压力",value:"PRESSURE"},{name:"电流",value:"CURRENT"}],tableData:[],maxlength:50,tableColumns:[{title:"序号",key:"itemId",align:"left",width:100},{title:"机组名称",key:"deviceName",align:"left",ellipsis:!0,tooltip:!0,width:200},{title:"测点名称",key:"itemName",align:"left",width:120},{title:"中文名称",key:"chineseName",align:"left",ellipsis:!0,tooltip:!0},{title:"英文名称",key:"engName",align:"left"},{title:"子系统",key:"subChildName",align:"left"},{title:"关联虚拟测点",key:"virtualTag",align:"left"},{title:"测点描述",key:"alias",align:"left",width:180,ellipsis:!0,tooltip:!0},{title:"公式",key:"formula",align:"left"},{title:"测点类型",key:"pointType",align:"left",render:function(a,t){var i=!0,l=!1,n=void 0;try{for(var s,o=r()(e.typeList);!(i=(s=o.next()).done);i=!0){var c=s.value;if(c.value===t.row.pointType)return a("span",c.name)}}catch(e){l=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(l)throw n}}}},{title:"操作",key:"action",width:100,align:"left",render:function(a,t){return a("div",[a("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.showDrawer("edit",t.row)}}},"编辑")])}}],currentIndex:0,title:"",formList:[{label:"测点名称",type:"input",value:"itemName",placeholder:"请输入测点名称"},{label:"测点类型",type:"select",value:"pointType",data:[]},{label:"公式",type:"textarea",value:"formula",placeholder:"请输入公式"},{label:"关联虚拟测点",type:"select",value:"virtualTag",data:[]},{label:"测点描述",type:"input",value:"alias",placeholder:"请输入测点描述"},{label:"英文名称",type:"input",value:"engName",placeholder:"请输入英文名称"},{label:"中文名称",type:"input",value:"chineseName",placeholder:"请输入中文名称"},{label:"设备名称",type:"select",value:"deviceId",data:[]},{label:"子系统名称",type:"input",value:"subChildName",placeholder:"请输入子系统名称"}],formValue:{},formValidate:{itemName:[{required:!0,message:"测点名称不能为空"}],alias:[{required:!0,message:"测点描述不能为空"}]},type:""}},methods:{selectTree:function(e){this.formValue.addr=e},getType:function(){var e=this;this.formList[1].data=this.typeList,Object(f.N)().then(function(a){200===a.code&&(e.deviceList=a.data.map(function(e){return{name:e.deviceName,value:e.deviceId}}),e.formList[7].data=a.data.map(function(e){return{name:e.deviceName,value:e.deviceId}}))}),Object(f.Z)().then(function(a){200===a.code&&(e.formList[3].data=a.data.map(function(e){return{name:e,value:e}}))})},loadTableData:function(e){var a=this,t=this.pageInfo,i=t.pageSize,l=t.pageIndex,n=this.search,s=n.alias,o=n.pointType,r=n.itemName,c=n.deviceId;this.pageInfo.loading=!0,e&&(this.pageInfo.pageIndex=1),Object(f.Q)({pageSize:i,pageNumber:l,alias:s,pointType:o,itemName:r,deviceId:c}).then(function(e){200===e.code?(a.tableData=e.data.result,a.pageInfo.totalElements=e.data.totalElements,a.pageInfo.loading=!1):(a.tableData=[],a.pageInfo.totalElements=0,a.pageInfo.loading=!1)})},showDrawer:function(e,a){if("delete"!==e){if("add"===e)this.title="新增自定义测点",this.formValue={},this.formValue.virtualTag="YES";else{var t=JSON.parse(s()(a));console.log(t),this.title="编辑测点",this.formValue=t,this.formValue.deviceId=Number(t.deviceId),this.formValue.virtualTag=t.virtualTag||"NO"}this.type=e,this.$refs.drawer.open()}},onRowClick:function(){},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},rowClassName:function(e,a){if(e.id==this.currentIndex)return"demo-table-info-row"},confirm:function(){var e=this;if(this.formValue.state=this.formValue.deviceStatus,this.formValue.deviceId=this.formValue.deviceId.toString(),!this.formValue.deviceName){var a=!0,t=!1,i=void 0;try{for(var n,s=r()(this.deviceList);!(a=(n=s.next()).done);a=!0){var o=n.value;o.value===this.formValue.deviceId&&(this.formValue.deviceName=o.name)}}catch(e){t=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(t)throw i}}}"edit"===this.type?Object(f.j)(l()({},this.formValue)).then(function(a){var t=a.code,i=a.msg;200===t?(e.$Message.success(e.$t("common.message.edit_success")),e.loadTableData(),e.$refs.drawer.close()):e.$Message.warning(i)}):Object(f.b)(l()({},this.formValue)).then(function(a){var t=a.code,i=a.msg;200===t?(e.$Message.success(e.$t("common.message.add_success")),e.loadTableData(),e.$refs.drawer.close()):e.$Message.warning(i)})}},mounted:function(){this.loadTableData(),this.getType()}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"list"},[t("div",{staticClass:"content"},[t("div",{staticClass:"filter-search"},[t("div",{staticClass:"filter-search-left"},[t("div",{staticClass:"filter-select mr-12"},[t("Input",{attrs:{placeholder:"输入测点名称",clearable:""},model:{value:e.search.itemName,callback:function(a){e.$set(e.search,"itemName",a)},expression:"search.itemName"}})],1),e._v(" "),t("div",{staticClass:"filter-select mr-12"},[t("Input",{attrs:{placeholder:"输入测点描述",clearable:""},model:{value:e.search.alias,callback:function(a){e.$set(e.search,"alias",a)},expression:"search.alias"}})],1),e._v(" "),t("div",{staticClass:"filter-select mr-12"},[t("Select",{attrs:{placeholder:"选择测点类型",clearable:""},model:{value:e.search.pointType,callback:function(a){e.$set(e.search,"pointType",a)},expression:"search.pointType"}},e._l(e.typeList,function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("div",{staticClass:"filter-select mr-12"},[t("Select",{attrs:{placeholder:"选择设备",clearable:""},model:{value:e.search.deviceId,callback:function(a){e.$set(e.search,"deviceId",a)},expression:"search.deviceId"}},e._l(e.deviceList,function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("div",{staticClass:"filter-btn"},[t("Button",{attrs:{type:"default",loading:e.pageInfo.loading},on:{click:function(a){e.loadTableData()}}},[t("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),t("div",{staticClass:"filter-search-right"},[t("span",{staticClass:"add-btn"},[t("Button",{attrs:{type:"default"},on:{click:function(a){e.showDrawer("add")}}},[t("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),t("div",{staticClass:"user-table"},[t("Table",{staticClass:"m-table no-scroll no-border",attrs:{stripe:"",loading:e.pageInfo.loading,columns:e.tableColumns,"row-class-name":e.rowClassName,data:e.tableData},on:{"on-row-click":e.onRowClick}})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),t("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList},on:{selectTree:e.selectTree,confirm:e.confirm},model:{value:e.formValue,callback:function(a){e.formValue=a},expression:"formValue"}})],1)])},staticRenderFns:[]};var v=t("VU/8")(m,p,!1,function(e){t("PMPc")},"data-v-86d9523e",null);a.a=v.exports}});
//# sourceMappingURL=18.5684bab4a9c6c2260a38.js.map