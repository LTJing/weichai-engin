webpackJsonp([15],{"+PoZ":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return l});var n=a("xXZE"),s=function(e){var t=e.pageNumber,a=e.pageSize,s=e.isRead;return n.a.request({url:"message/listNotice",params:{pageNumber:t,pageSize:a,isRead:s},method:"get"})},i=function(e){var t=e.noticeIds,a=void 0===t?[]:t;return n.a.request({url:"message/markRead",data:{noticeIds:a},method:"put"})},l=function(e){var t=e.noticeIds,a=void 0===t?[]:t;return n.a.request({url:"message/deleteNotice",data:{noticeIds:a},method:"post"})}},"2R9R":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("+PoZ"),l={name:"my-message",i18n_prefix:"page.message-center.my-message",data:function(){return{tableColumns:[{type:"selection",width:80,align:"center"},{title:this.$t_p("reminder_content"),key:"content",align:"center"},{title:this.$t_p("send_time"),key:"noticeTimeStr",align:"center"}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},isQuerying:!1,tableDataAll:[],pageInfoAll:{pageIndex:1,pageSize:10,totalElements:0},isQueryingAll:!1,tabTxt:"0",noticeIds:[]}},watch:{tabTxt:function(){"0"==this.tabTxt?this.loadTableData(!0):this.loadTableDataAll(!0)}},methods:{gotoBack:function(e){3==e.businessType&&this.$router.push({name:"device-summary-grouo-detail",params:{id:e.businessId}})},loadTableData:function(e){var t=this;e&&(this.pageInfo.pageIndex=1),this.pageInfo.loading=!0,Object(i.b)({pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize,isRead:0}).then(function(e){t.tableData=(e.data.result||[]).map(function(e){return s()({},e)}),t.pageInfo.totalElements=e.data.totalElements||0}).finally(function(){t.pageInfo.loading=!1})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},loadTableDataAll:function(e){var t=this;e&&(this.pageInfoAll.pageIndex=1),this.pageInfoAll.loading=!0,Object(i.b)({pageNumber:this.pageInfoAll.pageIndex,pageSize:this.pageInfoAll.pageSize,isRead:1}).then(function(e){t.tableDataAll=(e.data.result||[]).filter(function(e){return 1==e.isRead}),t.pageInfoAll.totalElements=e.data.totalElements||0}).finally(function(){t.pageInfoAll.loading=!1})},onPaginationChangeAll:function(e){this.pageInfoAll.pageIndex=e,this.loadTableDataAll(!1)},onPaginationSizeChangeAll:function(e){this.pageInfoAll.pageSize=e,this.loadTableDataAll(!0)},deleteSelection:function(){},selectTab:function(e){this.tabTxt=e,this.noticeIds=[]},setMessage:function(e){var t=this;"one"==e?this.noticeIds.length>0&&Object(i.c)({noticeIds:this.noticeIds}).then(function(e){t.loadTableData(!0),t.loadTableDataAll(!0),t.noticeIds=[]}):Object(i.c)({noticeIds:this.noticeIds}).then(function(e){t.loadTableData(!0),t.loadTableDataAll(!0),t.noticeIds=[]})},delMessage:function(){var e=this;Object(i.a)({noticeIds:this.noticeIds}).then(function(t){e.loadTableData(!0),e.loadTableDataAll(!0),e.noticeIds=[]})},saveCurrentModuleLocal:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.noticeIds=t}},mounted:function(){this.loadTableData(!0),this.loadTableDataAll(!0)}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-message view-list"},[e._m(0),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"form-ops"},[a("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"0"==e.tabTxt?"primary":"default"},on:{click:function(t){e.selectTab("0")}}},[e._v(e._s(e.$t_p("unread"))+"("+e._s(e.pageInfo.totalElements)+")")]),e._v(" "),a("Button",{attrs:{type:"1"==e.tabTxt?"primary":"default"},on:{click:function(t){e.selectTab("1")}}},[e._v(e._s(e.$t_p("read"))+"("+e._s(e.pageInfoAll.totalElements)+")")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"==e.tabTxt,expression:"tabTxt=='0'"}],staticClass:"con"},[a("div",{staticClass:"user-table no-scroll"},[a("Table",{staticClass:"m-table no-border no-scroll",attrs:{loading:e.isQuerying,"row-class-name":function(e,t){return t%2==1?"even":""},stripe:"",columns:e.tableColumns,data:e.tableData},on:{"on-selection-change":e.saveCurrentModuleLocal}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"form-ops"},[e.$hasAccess("msg.del")?a("Button",{class:{black:e.noticeIds.length>0},staticStyle:{"margin-right":"20px"},on:{click:function(t){e.delMessage()}}},[e._v(e._s(e.$t("common.message.delete")))]):e._e(),e._v(" "),e.$hasAccess("msg.edit")?a("Button",{class:{black:e.noticeIds.length>0},on:{click:function(t){e.setMessage("one")}}},[e._v(e._s(e.$t_p("mark_read")))]):e._e()],1),e._v(" "),a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.tabTxt,expression:"tabTxt=='1'"}],staticClass:"con"},[a("div",{staticClass:"user-table no-scroll"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{loading:e.isQueryingAll,"row-class-name":function(e,t){return t%2==1?"even":""},stripe:"",columns:e.tableColumns,data:e.tableDataAll},on:{"on-selection-change":e.saveCurrentModuleLocal}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"button-left"},[e.$hasAccess("msg.del")?a("Button",{class:{black:e.noticeIds.length>0},on:{click:function(t){e.delMessage()}}},[e._v(e._s(e.$t("common.message.delete")))]):e._e()],1),e._v(" "),a("Page",{attrs:{current:e.pageInfoAll.pageIndex,"page-size":e.pageInfoAll.pageSize,total:e.pageInfoAll.totalElements,"show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChangeAll,"on-page-size-change":e.onPaginationSizeChangeAll}})],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-sub"},[t("div",{staticClass:"title"},[t("div",{staticClass:"breadcrumb-item-link"},[this._v("我的提醒")]),this._v(" "),t("span",{staticClass:"empty"}),this._v(" "),t("span",{staticClass:"t-btn"})])])}]};var c=a("VU/8")(l,o,!1,function(e){a("HyVJ"),a("LU6K")},"data-v-1da96c10",null).exports;t.default=c},HyVJ:function(e,t){},LU6K:function(e,t){}});
//# sourceMappingURL=15.846522404efb29755362.js.map