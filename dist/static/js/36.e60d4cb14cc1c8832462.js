webpackJsonp([36],{"4Gxk":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("//Fk"),o=t.n(n),i=t("Dd8w"),s=t.n(i),l=t("xXZE"),r={name:"history-record",components:{},data:function(){var e=this;return{formFilter:{},serLoading:!1,formValidate:{},tableData:[],saveLoading:!1,title:"新增装车日志",ruleValidate:{type:[{required:!0,message:"保养类型不能为空",trigger:"blur"}],name:[{required:!0,message:"保养名称不能为空",trigger:"blur"}]},tableColumns:[{title:"日志名称",key:"name",align:"center"},{title:"时间",key:"createTime",align:"center"},{title:"操作",key:"action",width:280,align:"center",render:function(a,t){return a("div",[a("Button",{props:{type:"text",size:"small"},style:{marginRight:"8px",color:"#00c1de"},on:{click:function(){e.editInfo(t.row)}}},"编辑"),a("Button",{props:{type:"text",size:"small"},style:{marginRight:"8px",color:"#00c1de"},on:{click:function(){e.detailInfo(t.row)}}},"详情"),a("Button",{props:{type:"text",size:"small"},style:{cursor:"pointer",color:"#969696"},on:{click:function(){e.deleteInfo(t.row)}}},"删除")])}}],pageInfo:{pageIndex:1,pageSize:10,totalElements:0,loading:!1},modalNew:!1}},computed:{},watch:{},methods:{detailInfo:function(e){this.$router.push({name:"load-log",params:{id:e.id}})},editInfo:function(e){this.formValidate=s()({},e),this.title="编辑装车日志",this.modalNew=!0},checkFrom:function(){var e=this;return new o.a(function(a,t){e.$refs.formNew.validate(function(e,n){e?a():t(e,n)})})},saveInfo:function(){var e=this;this.saveLoading=!0,this.checkFrom().then(function(){var a,t;e.formValidate.id?(a=s()({},e.formValidate),t={name:a.name,id:a.id,takeAwayDetails:a.takeAwayDetails,content:a.content},l.a.request({url:"/takeAway/editTakeAway",data:t,method:"post"})).then(function(a){e.saveLoading=!1,e.$Message.info(e.$t("common.message.edit_success")),e.modalNew=!1,e.loadTableData()},function(a){e.saveLoading=!1,e.modalNew=!1,1e3==a.code?e.$Message.warning(a.msg):e.$Message.warning(e.$t("common.message.edit_fail"))}):function(e){var a={name:e.name};return l.a.request({url:"/takeAway/addTakeAway",data:a,method:"post"})}(s()({},e.formValidate)).then(function(a){e.saveLoading=!1,e.$Message.success(e.$t("common.message.add_success")),e.modalNew=!1,e.loadTableData()},function(a){e.saveLoading=!1,1e3==a.code?e.$Message.warning(a.msg):e.$Message.warning(e.$t("common.message.add_fail"))})},function(a,t){e.saveLoading=!1})},addCancel:function(){this.modalNew=!1},deleteInfo:function(e){var a=this;this.$Modal.confirm({title:"提示",width:this.$flexible(450),content:"确认删除装车日志为["+e.name+"]吗?",onOk:function(){var t,n;(t={id:e.id},n={id:t.id},l.a.request({url:"/takeAway/delTakeAway",data:n,method:"post"})).then(function(){a.$Message.success(a.$t("common.message.delete_success")),a.loadTableData()},function(e){1e3===e.code?a.$Message.warning(e.msg):a.$Message.warning(a.$t("common.message.delete_fail"))})}})},clickshow:function(){this.modalNew=!0,this.formValidate={},this.title="新增车载记录"},loadTableData:function(e){var a,t,n=this;e&&(this.pageInfo.pageIndex=1),this.pageInfo.loading=!0,(a={pageSize:this.pageInfo.pageSize,pageNumber:this.pageInfo.pageIndex,name:this.formFilter.name},t={pageNumber:a.pageNumber,pageSize:a.pageSize,name:a.name},l.a.request({url:"takeAway/listTakeAway",params:t,method:"get"})).then(function(e){n.pageInfo.loading=!1,n.tableData=(e.data.result||[]).map(function(e){return s()({},e)}),n.pageInfo.totalElements=e.data.totalElements||0})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)}},mounted:function(){this.loadTableData(!0)},destroyed:function(){}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"history-record"},[e._m(0),e._v(" "),t("div",{staticClass:"header"},[t("div",{staticClass:"filter"},[t("Form",{ref:"formFilter",attrs:{model:e.formFilter}},[t("FormItem",{attrs:{label:"输入搜索"}},[t("Input",{staticClass:"filter-input",attrs:{placeholder:"请输入装车日志名称"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.loadTableData(!0)}},model:{value:e.formFilter.name,callback:function(a){e.$set(e.formFilter,"name",a)},expression:"formFilter.name"}})],1),e._v(" "),t("FormItem",{attrs:{"label-width":10}},[t("Button",{staticClass:"search-btn",attrs:{loading:e.pageInfo.loading,type:"primary"},on:{click:function(a){e.loadTableData(!0)}}},[t("Icon",{attrs:{type:"search"}}),e._v("\n            查询\n          ")],1)],1)],1),e._v(" "),t("Button",{staticClass:"btn-create",attrs:{type:"primary"},on:{click:e.clickshow}},[e._v("新增\n      ")])],1)]),e._v(" "),t("div",{staticClass:"content"},[t("div",{staticClass:"user-table"},[t("Table",{staticClass:"m-table no-scroll",attrs:{loading:e.pageInfo.loading,"row-class-name":function(e,a){return a%2==1?"even":""},stripe:"",border:"",columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)]),e._v(" "),t("Modal",{attrs:{title:e.title,width:e.$flexible(550),"footer-hide":""},model:{value:e.modalNew,callback:function(a){e.modalNew=a},expression:"modalNew"}},[t("Form",{ref:"formNew",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":150}},[t("FormItem",{attrs:{label:"日志名称：",prop:"name"}},[t("Input",{staticClass:"search-input",attrs:{maxlength:50,placeholder:"请输入日志名称"},model:{value:e.formValidate.name,callback:function(a){e.$set(e.formValidate,"name",a)},expression:"formValidate.name"}})],1)],1),e._v(" "),t("div",{staticClass:"ivu-modal-footer"},[t("Button",{staticClass:"search-btn",attrs:{type:"default"},on:{click:e.addCancel}},[t("Icon",{attrs:{type:"search"}}),e._v("\n        取消\n      ")],1),e._v(" "),t("Button",{staticClass:"search-btn",attrs:{type:"primary",loading:e.saveLoading},on:{click:function(a){e.saveInfo()}}},[t("Icon",{attrs:{type:"search"}}),e._v("\n        保存\n      ")],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"header-sub"},[a("span",{staticClass:"title"},[this._v("装车日志")])])}]};var d=t("VU/8")(r,c,!1,function(e){t("PjSp")},"data-v-5464b21c",null).exports;a.default=d},PjSp:function(e,a){}});
//# sourceMappingURL=36.e60d4cb14cc1c8832462.js.map