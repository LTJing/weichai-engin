{"version":3,"sources":["webpack:///./src/view/point-manage/index.js","webpack:///src/view/point-manage/point-manage.vue","webpack:///./src/view/point-manage/point-manage.vue?69f9","webpack:///./src/view/point-manage/point-manage.vue"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__point_manage_vue__","__webpack_require__","Main","point_manage","components","StatusSelect","device_select","LaboratoryList","laboratory_list","customDrawer","common_drawer","data","_this","this","deviceList","search","pointType","alias","itemName","pageInfo","loading","pageIndex","pageSize","totalElements","typeList","name","tableData","maxlength","tableColumns","title","key","align","width","ellipsis","tooltip","render","h","params","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","row","err","return","class","style","marginLeft","color","on","click","showDrawer","currentIndex","formList","label","type","placeholder","formValue","formValidate","required","message","methods","selectTree","e","addr","getType","_this2","device","then","res","code","map","i","deviceName","deviceId","loadTableData","clear","_this3","_pageInfo","pageNumber","_search","result","virtualTag","val","JSON","parse","stringify_default","console","log","Number","$refs","drawer","open","onRowClick","onPaginationChange","index","onPaginationSizeChange","size","rowClassName","id","confirm","_this4","state","deviceStatus","toString","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","extends_default","msg","$Message","success","$t","close","warning","mounted","point_manage_point_manage","_vm","_h","$createElement","_c","_self","staticClass","attrs","clearable","model","callback","$$v","$set","expression","_v","_l","_s","$event","stripe","columns","row-class-name","on-row-click","current","page-size","total","show-elevator","show-sizer","show-total","on-change","on-page-size-change","ref","staticRenderFns","Component","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/18.5684bab4a9c6c2260a38.js","sourcesContent":["import Main from './point-manage.vue'\r\n\r\nexport default Main\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/point-manage/index.js","<template>\r\n  <div class=\"list\">\r\n    <div class=\"content\">\r\n      <!-- <div class=\"header-sub\">\r\n        <div class=\"title\">\r\n          <div class=\"breadcrumb-item-link\">测点配置</div>\r\n          <span class=\"empty\"></span>\r\n        </div>\r\n      </div> -->\r\n      <div class=\"filter-search\">\r\n        <div class=\"filter-search-left\">\r\n          <div class=\"filter-select mr-12\">\r\n            <Input\r\n              placeholder=\"输入测点名称\"\r\n              v-model=\"search.itemName\"\r\n              clearable\r\n            ></Input>\r\n          </div>\r\n          <div class=\"filter-select mr-12\">\r\n            <Input\r\n              placeholder=\"输入测点描述\"\r\n              v-model=\"search.alias\"\r\n              clearable\r\n            ></Input>\r\n          </div>\r\n          <div class=\"filter-select mr-12\">\r\n            <Select\r\n              placeholder=\"选择测点类型\"\r\n              v-model=\"search.pointType\"\r\n              clearable\r\n            >\r\n              <Option\r\n                v-for=\"item in typeList\"\r\n                :value=\"item.value\"\r\n                :key=\"item.value\"\r\n                >{{ item.name }}</Option\r\n              >\r\n            </Select>\r\n          </div>\r\n          <div class=\"filter-select mr-12\">\r\n            <Select placeholder=\"选择设备\" v-model=\"search.deviceId\" clearable>\r\n              <Option\r\n                v-for=\"item in deviceList\"\r\n                :value=\"item.value\"\r\n                :key=\"item.value\"\r\n                >{{ item.name }}</Option\r\n              >\r\n            </Select>\r\n          </div>\r\n          <div class=\"filter-btn\">\r\n            <Button\r\n              type=\"default\"\r\n              @click=\"loadTableData()\"\r\n              :loading=\"pageInfo.loading\"\r\n            >\r\n              <span class=\"iconfont icon-chazhao\"></span>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div class=\"filter-search-right\">\r\n          <span class=\"add-btn\">\r\n            <Button type=\"default\" @click=\"showDrawer('add')\">\r\n              <span class=\"iconfont icon-a-lianhe68\"></span>\r\n              新增\r\n            </Button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"user-table\">\r\n        <Table\r\n          class=\"m-table no-scroll no-border\"\r\n          stripe\r\n          :loading=\"pageInfo.loading\"\r\n          :columns=\"tableColumns\"\r\n          :row-class-name=\"rowClassName\"\r\n          @on-row-click=\"onRowClick\"\r\n          :data=\"tableData\"\r\n        ></Table>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <Page\r\n          @on-change=\"onPaginationChange\"\r\n          @on-page-size-change=\"onPaginationSizeChange\"\r\n          :current=\"pageInfo.pageIndex\"\r\n          :page-size=\"pageInfo.pageSize\"\r\n          :total=\"pageInfo.totalElements\"\r\n          show-elevator\r\n          show-sizer\r\n          show-total\r\n        />\r\n      </div>\r\n      <custom-drawer\r\n        ref=\"drawer\"\r\n        :title=\"title\"\r\n        :formValidate=\"formValidate\"\r\n        :formList=\"formList\"\r\n        v-model=\"formValue\"\r\n        @selectTree=\"selectTree\"\r\n        @confirm=\"confirm\"\r\n      ></custom-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StatusSelect from '@/components/device-select'\r\nimport LaboratoryList from '@/components/laboratory-list'\r\nimport customDrawer from '@/components/common-drawer/common-drawer'\r\nimport {\r\n  getPointList,\r\n  addPointList,\r\n  editPointList,\r\n  getPointByDeviceId,\r\n  getVirtualTag\r\n} from '@/api/device'\r\nexport default {\r\n  components: {\r\n    StatusSelect,\r\n    LaboratoryList,\r\n    customDrawer\r\n  },\r\n  data () {\r\n    return {\r\n      deviceList: [],\r\n      search: {\r\n        pointType: '',\r\n        alias: '',\r\n        itemName: ''\r\n      },\r\n      pageInfo: {\r\n        loading: false,\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        totalElements: 30\r\n      },\r\n      typeList: [\r\n        { name: '电压', value: 'VOLTAGE' },\r\n        { name: '功率', value: 'POWER' },\r\n        { name: '流量', value: 'FLOW' },\r\n        { name: '温度', value: 'TEMPERATURE' },\r\n        { name: '压力', value: 'PRESSURE' },\r\n        { name: '电流', value: 'CURRENT' }\r\n      ],\r\n      tableData: [],\r\n      maxlength: 50,\r\n      tableColumns: [\r\n        {\r\n          title: '序号',\r\n          key: 'itemId',\r\n          align: 'left',\r\n          width: 100\r\n        },\r\n        {\r\n          title: '机组名称',\r\n          key: 'deviceName',\r\n          align: 'left',\r\n          ellipsis: true,\r\n          tooltip: true,\r\n          width: 200\r\n        },\r\n        {\r\n          title: '测点名称',\r\n          key: 'itemName',\r\n          align: 'left',\r\n          width: 120\r\n        },\r\n        {\r\n          title: '中文名称',\r\n          key: 'chineseName',\r\n          align: 'left',\r\n          ellipsis: true,\r\n          tooltip: true\r\n        },\r\n        {\r\n          title: '英文名称',\r\n          key: 'engName',\r\n          align: 'left'\r\n        },\r\n        {\r\n          title: '子系统',\r\n          key: 'subChildName',\r\n          align: 'left'\r\n        },\r\n        {\r\n          title: '关联虚拟测点',\r\n          key: 'virtualTag',\r\n          align: 'left'\r\n          // render: (h, params) => {\r\n          //   return h('span', params.row.virtualTag === 'YES' ? '是' : '否')\r\n          // }\r\n        },\r\n        {\r\n          title: '测点描述',\r\n          key: 'alias',\r\n          align: 'left',\r\n          width: 180,\r\n          ellipsis: true,\r\n          tooltip: true\r\n        },\r\n        {\r\n          title: '公式',\r\n          key: 'formula',\r\n          align: 'left'\r\n        },\r\n        {\r\n          title: '测点类型',\r\n          key: 'pointType',\r\n          align: 'left',\r\n          render: (h, params) => {\r\n            for (let item of this.typeList) {\r\n              if (item.value === params.row.pointType) {\r\n                return h('span', item.name)\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action',\r\n          width: 100,\r\n          align: 'left',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h(\r\n                'span',\r\n                {\r\n                  class: 'primary',\r\n                  style: {\r\n                    marginLeft: 0,\r\n                    color: '#0084FF'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.showDrawer('edit', params.row)\r\n                    }\r\n                  }\r\n                },\r\n                '编辑'\r\n              )\r\n            ])\r\n          }\r\n        }\r\n      ],\r\n      currentIndex: 0,\r\n      title: '',\r\n      formList: [\r\n        {\r\n          label: '测点名称',\r\n          type: 'input',\r\n          value: 'itemName',\r\n          placeholder: '请输入测点名称'\r\n        },\r\n        {\r\n          label: '测点类型',\r\n          type: 'select',\r\n          value: 'pointType',\r\n          data: []\r\n        },\r\n        {\r\n          label: '公式',\r\n          type: 'textarea',\r\n          value: 'formula',\r\n          placeholder: '请输入公式'\r\n        },\r\n        {\r\n          label: '关联虚拟测点',\r\n          type: 'select',\r\n          value: 'virtualTag',\r\n          data: []\r\n        },\r\n        {\r\n          label: '测点描述',\r\n          type: 'input',\r\n          value: 'alias',\r\n          placeholder: '请输入测点描述'\r\n        },\r\n        {\r\n          label: '英文名称',\r\n          type: 'input',\r\n          value: 'engName',\r\n          placeholder: '请输入英文名称'\r\n        },\r\n        {\r\n          label: '中文名称',\r\n          type: 'input',\r\n          value: 'chineseName',\r\n          placeholder: '请输入中文名称'\r\n        },\r\n        {\r\n          label: '设备名称',\r\n          type: 'select',\r\n          value: 'deviceId',\r\n          data: []\r\n        },\r\n        {\r\n          label: '子系统名称',\r\n          type: 'input',\r\n          value: 'subChildName',\r\n          placeholder: '请输入子系统名称'\r\n        }\r\n      ],\r\n      formValue: {},\r\n      formValidate: {\r\n        itemName: [{ required: true, message: '测点名称不能为空' }],\r\n        // pointType: [{required: true, message: '测点类型不能为空'}],\r\n        // deviceId: [{required: true, message: '设备名称不能为空'}],\r\n        alias: [{ required: true, message: '测点描述不能为空' }]\r\n      },\r\n      type: ''\r\n    }\r\n  },\r\n  methods: {\r\n    selectTree (e) {\r\n      this.formValue.addr = e\r\n    },\r\n    getType () {\r\n      this.formList[1].data = this.typeList\r\n      getPointByDeviceId().then(res => {\r\n        if (res.code === 200) {\r\n          this.deviceList = res.data.map(i => {\r\n            return {\r\n              name: i.deviceName,\r\n              value: i.deviceId\r\n            }\r\n          })\r\n          this.formList[7].data = res.data.map(i => {\r\n            return {\r\n              name: i.deviceName,\r\n              value: i.deviceId\r\n            }\r\n          })\r\n        }\r\n      })\r\n      getVirtualTag().then(res => {\r\n        if (res.code === 200) {\r\n          this.formList[3].data = res.data.map(i => {\r\n            return {\r\n              name: i,\r\n              value: i\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    loadTableData (clear) {\r\n      let { pageSize, pageIndex: pageNumber } = this.pageInfo\r\n      let { alias, pointType, itemName, deviceId } = this.search\r\n      this.pageInfo.loading = true\r\n      if (clear) {\r\n        this.pageInfo.pageIndex = 1\r\n      }\r\n      getPointList({\r\n        pageSize,\r\n        pageNumber,\r\n        alias,\r\n        pointType,\r\n        itemName,\r\n        deviceId\r\n      }).then(res => {\r\n        if (res.code === 200) {\r\n          this.tableData = res.data.result\r\n          this.pageInfo.totalElements = res.data.totalElements\r\n          this.pageInfo.loading = false\r\n        } else {\r\n          this.tableData = []\r\n          this.pageInfo.totalElements = 0\r\n          this.pageInfo.loading = false\r\n        }\r\n      })\r\n    },\r\n    showDrawer (type, params) {\r\n      if (type !== 'delete') {\r\n        if (type === 'add') {\r\n          this.title = '新增自定义测点'\r\n          this.formValue = {}\r\n          this.formValue.virtualTag = 'YES'\r\n        } else {\r\n          let val = JSON.parse(JSON.stringify(params))\r\n          console.log(val)\r\n          this.title = '编辑测点'\r\n          this.formValue = val\r\n          this.formValue.deviceId = Number(val.deviceId)\r\n          this.formValue.virtualTag = val.virtualTag || 'NO'\r\n        }\r\n        this.type = type\r\n        this.$refs.drawer.open()\r\n      } else {\r\n      }\r\n    },\r\n    onRowClick () {},\r\n    onPaginationChange (index) {\r\n      this.pageInfo.pageIndex = index\r\n      this.loadTableData(false)\r\n    },\r\n    onPaginationSizeChange (size) {\r\n      this.pageInfo.pageSize = size\r\n      this.loadTableData(true)\r\n    },\r\n    rowClassName (row, index) {\r\n      if (row.id == this.currentIndex) {\r\n        return 'demo-table-info-row'\r\n      }\r\n    },\r\n    confirm () {\r\n      this.formValue.state = this.formValue.deviceStatus\r\n      this.formValue.deviceId = this.formValue.deviceId.toString()\r\n      if (!this.formValue.deviceName) {\r\n        for (let item of this.deviceList) {\r\n          if (item.value === this.formValue.deviceId) {\r\n            this.formValue.deviceName = item.name\r\n          }\r\n        }\r\n      }\r\n      if (this.type === 'edit') {\r\n        editPointList({ ...this.formValue }).then(res => {\r\n          let { code, msg } = res\r\n          if (code === 200) {\r\n            this.$Message.success(this.$t('common.message.edit_success'))\r\n            this.loadTableData()\r\n            this.$refs.drawer.close()\r\n          } else {\r\n            this.$Message.warning(msg)\r\n          }\r\n        })\r\n      } else {\r\n        addPointList({ ...this.formValue }).then(res => {\r\n          let { code, msg } = res\r\n          if (code === 200) {\r\n            this.$Message.success(this.$t('common.message.add_success'))\r\n            this.loadTableData()\r\n            this.$refs.drawer.close()\r\n          } else {\r\n            this.$Message.warning(msg)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.loadTableData()\r\n    this.getType()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../../style/varient\";\r\n@size-padding: 10px;\r\n/deep/.ivu-page-options-elevator input {\r\n  padding-left: 0.1rem !important;\r\n  text-align: center;\r\n}\r\n.list {\r\n  width: 100%;\r\n  height: 100%;\r\n  .content {\r\n    width: 100%;\r\n    height: 100%;\r\n    box-shadow: 0px -1px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*上边阴影  红色*/ -1px 0px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*左边阴影  绿色*/ 1px 0px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*右边阴影  蓝色*/ 0px 1px 2px 0px rgba(0, 0, 0, 0.05); /*下边阴影  黄色*/\r\n    padding: 24px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/point-manage/point-manage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"filter-search\"},[_c('div',{staticClass:\"filter-search-left\"},[_c('div',{staticClass:\"filter-select mr-12\"},[_c('Input',{attrs:{\"placeholder\":\"输入测点名称\",\"clearable\":\"\"},model:{value:(_vm.search.itemName),callback:function ($$v) {_vm.$set(_vm.search, \"itemName\", $$v)},expression:\"search.itemName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-select mr-12\"},[_c('Input',{attrs:{\"placeholder\":\"输入测点描述\",\"clearable\":\"\"},model:{value:(_vm.search.alias),callback:function ($$v) {_vm.$set(_vm.search, \"alias\", $$v)},expression:\"search.alias\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-select mr-12\"},[_c('Select',{attrs:{\"placeholder\":\"选择测点类型\",\"clearable\":\"\"},model:{value:(_vm.search.pointType),callback:function ($$v) {_vm.$set(_vm.search, \"pointType\", $$v)},expression:\"search.pointType\"}},_vm._l((_vm.typeList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-select mr-12\"},[_c('Select',{attrs:{\"placeholder\":\"选择设备\",\"clearable\":\"\"},model:{value:(_vm.search.deviceId),callback:function ($$v) {_vm.$set(_vm.search, \"deviceId\", $$v)},expression:\"search.deviceId\"}},_vm._l((_vm.deviceList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-btn\"},[_c('Button',{attrs:{\"type\":\"default\",\"loading\":_vm.pageInfo.loading},on:{\"click\":function($event){_vm.loadTableData()}}},[_c('span',{staticClass:\"iconfont icon-chazhao\"})])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"filter-search-right\"},[_c('span',{staticClass:\"add-btn\"},[_c('Button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){_vm.showDrawer('add')}}},[_c('span',{staticClass:\"iconfont icon-a-lianhe68\"}),_vm._v(\"\\n            新增\\n          \")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"user-table\"},[_c('Table',{staticClass:\"m-table no-scroll no-border\",attrs:{\"stripe\":\"\",\"loading\":_vm.pageInfo.loading,\"columns\":_vm.tableColumns,\"row-class-name\":_vm.rowClassName,\"data\":_vm.tableData},on:{\"on-row-click\":_vm.onRowClick}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('Page',{attrs:{\"current\":_vm.pageInfo.pageIndex,\"page-size\":_vm.pageInfo.pageSize,\"total\":_vm.pageInfo.totalElements,\"show-elevator\":\"\",\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.onPaginationChange,\"on-page-size-change\":_vm.onPaginationSizeChange}})],1),_vm._v(\" \"),_c('custom-drawer',{ref:\"drawer\",attrs:{\"title\":_vm.title,\"formValidate\":_vm.formValidate,\"formList\":_vm.formList},on:{\"selectTree\":_vm.selectTree,\"confirm\":_vm.confirm},model:{value:(_vm.formValue),callback:function ($$v) {_vm.formValue=$$v},expression:\"formValue\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-86d9523e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/point-manage/point-manage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-86d9523e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":55}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./point-manage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./point-manage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./point-manage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-86d9523e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./point-manage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-86d9523e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/point-manage/point-manage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}