webpackJsonp([40],{XNk3:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("xXZE"),n=t("PJh5"),s=t.n(n),l={name:"log-info",i18n_prefix:"page.log-info.log-info",data:function(){return{searchName:"",timeRange:[s()().add(-6,"d").format("YYYY/MM/DD"),s()().format("YYYY/MM/DD")],searchOp:"",opList:[],tableColumns:[{title:"用户名",key:"userName",align:"left"},{title:"姓名",key:"fullName",align:"left"},{title:"时间",key:"opTime",align:"left"},{title:"操作类型",key:"opType",align:"left"},{title:"操作内容",key:"detail",align:"left"},{title:"IP",key:"clientIp",align:"left"},{title:"所属区域",key:"orgName",align:"left"}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0},isQuerying:!1}},methods:{loadTableData:function(e,a){var t=this;if(console.log(this.timeRange),this.timeRange[0]){e&&(this.pageInfo.pageIndex=1),this.isQuerying=!0;var n,l,o=this.timeRange[0]&&s()(s()(this.timeRange[0])).format("YYYY-MM-DD 00:00:00"),r=this.timeRange[1]&&s()(s()(this.timeRange[1])).format("YYYY-MM-DD 23:59:59");(n={beginTime:o,endTime:r,searchName:this.searchName,searchOp:(this.searchOp||[]).join(","),pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize},l={beginTime:n.beginTime,endTime:n.endTime,userName:n.searchName,searchOp:n.searchOp,pageSize:n.pageSize,pageNumber:n.pageNumber},i.a.request({url:"/log/listLog",params:l,method:"get"})).then(function(e){t.tableData=e.data.result||[],t.pageInfo.totalElements=e.data.totalElements||0}).finally(function(){t.isQuerying=!1,console.log("--------",t.timeRange)})}else a||this.$Message.info("请选择时间范围")},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)}},mounted:function(){this.loadTableData(!0)}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"log-info"},[t("div",{staticClass:"content"},[e._m(0),e._v(" "),t("div",{staticClass:"filter-search"},[t("div",{staticClass:"filter-search-left"},[t("div",{staticClass:"filter-input mr-12"},[t("Input",{staticClass:"filter-input",attrs:{type:"text",maxlength:50,clearable:"",placeholder:"请输入用户/姓名"},on:{"on-enter":function(a){e.loadTableData(!0,!0)}},model:{value:e.searchName,callback:function(a){e.searchName=a},expression:"searchName"}})],1),e._v(" "),t("div",{staticClass:"filter-input mr-12"},[t("DatePicker",{attrs:{type:"daterange",format:"yyyy/MM/dd",placement:"bottom-end",placeholder:"请选择结束时间"},on:{"on-change":function(a){e.loadTableData(!0,!0)}},model:{value:e.timeRange,callback:function(a){e.timeRange=a},expression:"timeRange"}})],1),e._v(" "),t("div",{staticClass:"filter-btn"},[t("Button",{attrs:{type:"default",loading:e.isQuerying},on:{click:function(a){e.loadTableData(!0)}}},[t("span",{staticClass:"iconfont icon-chazhao"})])],1)])]),e._v(" "),t("div",{staticClass:"user-table no-scroll"},[t("Table",{staticClass:"m-table no-border no-scroll",attrs:{loading:e.isQuerying,"row-class-name":function(e,a){return a%2==1?"even":""},stripe:"",columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"header-sub"},[a("div",{staticClass:"title"},[a("div",{staticClass:"breadcrumb-item-link"},[this._v("平台日志")])])])}]};var r=t("VU/8")(l,o,!1,function(e){t("ZWDq")},"data-v-44d881b8",null).exports;a.default=r},ZWDq:function(e,a){}});
//# sourceMappingURL=40.0e83073e40d8a073448f.js.map