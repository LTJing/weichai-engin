webpackJsonp([16],{"2kUK":function(e,t){},"Rr+Z":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("RWfK"),n=a("CCvC"),s=a("Dd8w"),l=a.n(s),r=a("BO1k"),o=a.n(r),c=a("526/"),d=a("jpo7"),m=a("G8pB"),u=a("xV2B"),f={components:{StatusSelect:c.a,LaboratoryList:d.a,customDrawer:m.a},data:function(){var e=this;return{childSystemName:[],zhengji:[{name:"G01",value:"G01"}],search:{parentDeviceName:"",deviceName:"",childSystemName:""},pageInfo:{loading:!1,pageIndex:1,pageSize:10,totalElements:30},tableData:[],maxlength:50,selectLocation:"",tableColumns:[{title:"整机组名称",key:"parentDeviceName",align:"left"},{title:"单机组名称",key:"deviceName",align:"left"},{title:"子系统名称",key:"childSystemName",align:"left"},{title:"作图程序开始时间",key:"drawStartTime",align:"left"},{title:"作图程序结束时间",key:"drawEndTime",align:"left"},{title:"操作",key:"action",width:120,align:"left",render:function(t,a){return t("div",[t("span",{class:"primary",style:{marginLeft:0,color:"#0084FF"},on:{click:function(){e.goDetail(a.row)}}},"下载")])}}],currentIndex:0,title:"",formList:[{label:"整机组名称",type:"select",value:"parentDeviceName",data:[{name:"G01",value:"G01"}]},{label:"单机组名称",type:"select",value:"deviceName",data:[]},{label:"子系统名称",type:"select",value:"childSystemName",data:[]},{label:"开始时间",type:"datePicker",value:"drawStartTime"},{label:"结束时间",type:"datePicker",value:"drawEndTime"}],formValue:{},formValidate:{deviceName:[{required:!0,message:"单机组名称不能为空"}],parentDeviceName:[{required:!0,message:"整机组名称不能为空"}],childSystemName:[{required:!0,message:"子系统名称不能为空"}],drawStartTime:[{required:!0,message:"开始时间不能为空"}],drawEndTime:[{required:!0,message:"结束时间不能为空"}]},type:""}},methods:{selectTree:function(e){this.formValue.addr=e},getlocation:function(e){this.formValue.longitude=e.lng,this.formValue.latitude=e.lat},getType:function(){var e=this;Object(u._1)().then(function(t){if(200===t.code){var a=!0,i=!1,n=void 0;try{for(var s,l=o()(t.data);!(a=(s=l.next()).done);a=!0){var r=s.value;e.childSystemName.push({name:r,value:r})}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}e.formList[2].data=e.childSystemName}}),Object(u.z)().then(function(t){200===t.code&&(e.formList[1].data=t.data.map(function(e){return{name:e.deviceName,value:e.id}}))})},loadTableData:function(){var e=this,t=this.pageInfo,a=t.pageSize,i=t.pageIndex;this.pageInfo.loading=!0,Object(u.y)(l()({pageSize:a,pageNumber:i},this.search)).then(function(t){var a=t.code,i=t.data;e.pageInfo.loading=!1,200===a&&(e.tableData=i.result,e.pageInfo.totalElements=i.totalElements)})},goDetail:function(e){window.open(e.downloadUrl,"_blank")},showDrawer:function(e,t){"delete"!==e&&("add"===e&&(this.title="作图程序条件",this.formValue={}),this.type=e,this.$refs.drawer.open())},onRowClick:function(e){},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},rowClassName:function(e,t){if(e.id==this.currentIndex)return"demo-table-info-row"},fmtDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},confirm:function(){var e=this;console.log(this.formValue.drawStartTime),this.formValue.drawStartTime=this.fmtDate(this.formValue.drawStartTime),this.formValue.drawEndTime=this.fmtDate(this.formValue.drawEndTime),Object(u._4)(l()({},this.formValue)).then(function(t){var a=t.code,i=t.msg;200===a?(e.$Message.success(t.msg),e.loadTableData(),e.getType(),e.$refs.drawer.close()):e.$Message.warning(i)})}},mounted:function(){this.loadTableData(),this.getType()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("div",{staticClass:"content"},[a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input mr-12"},[a("Select",{attrs:{placeholder:"请选择机组名称",clearable:""},model:{value:e.search.parentDeviceName,callback:function(t){e.$set(e.search,"parentDeviceName",t)},expression:"search.parentDeviceName"}},e._l(e.zhengji,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("StatusSelect",{attrs:{placeholder:"请选择单机组名称",filterable:!0,type:4},model:{value:e.search.deviceName,callback:function(t){e.$set(e.search,"deviceName",t)},expression:"search.deviceName"}})],1),e._v(" "),a("div",{staticClass:"filter-input mr-12"},[a("Select",{attrs:{placeholder:"请选择子系统名称",clearable:""},model:{value:e.search.childSystemName,callback:function(t){e.$set(e.search,"childSystemName",t)},expression:"search.childSystemName"}},e._l(e.childSystemName,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{staticClass:"search-btn",attrs:{type:"default"},on:{click:e.loadTableData}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"add-btn"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showDrawer("add")}}},[e._v("\n            分析\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",staticStyle:{"min-height":"600px"},attrs:{stripe:"",loading:e.pageInfo.loading,columns:e.tableColumns,"row-class-name":e.rowClassName,data:e.tableData},on:{"on-row-click":e.onRowClick}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1),e._v(" "),a("custom-drawer",{ref:"drawer",attrs:{title:e.title,formValidate:e.formValidate,formList:e.formList,selectLocation:e.selectLocation},on:{selectTree:e.selectTree,getlocation:e.getlocation,confirm:e.confirm},model:{value:e.formValue,callback:function(t){e.formValue=t},expression:"formValue"}})],1)])},staticRenderFns:[]};var g=a("VU/8")(f,h,!1,function(e){a("VzmF")},"data-v-af5cd996",null).exports,v={name:"platform",components:{tab:i.a,performanceAnalysis:g},mixins:[n.a],data:function(){return{tabList:[{id:1,name:"性能分析",com:g}],tabIndex:0,is:null}},created:function(){this.is=this.tabList[this.tabIndex].com},methods:{changeTab:function(e){console.log(e),this.tabIndex=e,this.is=this.tabList[e].com}}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"platform"},[t("tab",{attrs:{data:this.tabList,current:this.tabIndex},on:{change:this.changeTab}}),this._v(" "),t("div",{staticClass:"content"},[t("transition",{attrs:{"enter-active-class":this.routerTransitionClass.enter,"leave-active-class":this.routerTransitionClass.leave}},[t(this.is,{tag:"component"})],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,p,!1,function(e){a("2kUK")},"data-v-22cb7ba0",null);t.default=b.exports},VzmF:function(e,t){}});
//# sourceMappingURL=16.ef6d482e12ecd8da7d7c.js.map