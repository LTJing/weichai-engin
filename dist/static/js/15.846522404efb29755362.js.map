{"version":3,"sources":["webpack:///./src/api/message.js","webpack:///src/view/message-center/components/my-message/my-message.vue","webpack:///./src/view/message-center/components/my-message/my-message.vue?808e","webpack:///./src/view/message-center/components/my-message/my-message.vue","webpack:///./src/view/message-center/components/my-message/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getMessageList","setMessageReaded","deleteMessage","__WEBPACK_IMPORTED_MODULE_0__libs_api_request__","_ref","pageNumber","pageSize","isRead","axios","request","url","params","method","_ref2","_ref2$noticeIds","noticeIds","undefined","data","_ref3","_ref3$noticeIds","my_message","name","i18n_prefix","tableColumns","type","width","align","title","this","$t_p","key","tableData","pageInfo","pageIndex","totalElements","isQuerying","tableDataAll","pageInfoAll","isQueryingAll","tabTxt","watch","loadTableData","loadTableDataAll","methods","gotoBack","item","businessType","$router","push","id","businessId","clear","_this","loading","Object","message","then","res","result","map","extends_default","finally","onPaginationChange","index","onPaginationSizeChange","size","_this2","filter","onPaginationChangeAll","onPaginationSizeChangeAll","deleteSelection","selectTab","txt","setMessage","_this3","length","delMessage","_this4","saveCurrentModuleLocal","nodes","modules","forEach","n","mounted","my_message_my_message","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","staticStyle","margin-right","attrs","on","click","$event","_s","directives","rawName","value","expression","row-class-name","row","stripe","columns","on-selection-change","$hasAccess","class","black","$t","_e","current","page-size","total","show-sizer","show-total","on-change","on-page-size-change","staticRenderFns","components_my_message_my_message","normalizeComponent","ssrContext","Main"],"mappings":"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","file":"static/js/15.846522404efb29755362.js","sourcesContent":["import axios from '@/libs/api.request'\r\n\r\n\r\nexport const getNum = () => {\r\nreturn axios.request({\r\nurl: 'order/getTaskNum',\r\nmethod: 'get'\r\n})\r\n};\r\n\r\nexport const getMessageList = ({\r\n                                    pageNumber,\r\n                                    pageSize,\r\n                                 isRead\r\n                                  }) => {\r\n  return axios.request({\r\n    url: 'message/listNotice',\r\n    params: {\r\n      pageNumber,\r\n      pageSize,\r\n      isRead\r\n    },\r\n    method: 'get'\r\n  })\r\n};\r\n\r\n\r\nexport const setMessageReaded = ({\r\n                                   noticeIds = []\r\n                                  }) => {\r\n  return axios.request({\r\n    url: 'message/markRead',\r\n    data: {\r\n      noticeIds\r\n    },\r\n    method: 'put'\r\n  })\r\n};\r\n\r\nexport const deleteMessage = ({\r\n                                noticeIds = []\r\n                                  }) => {\r\n  return axios.request({\r\n    url: 'message/deleteNotice',\r\n    data: {\r\n      noticeIds\r\n    },\r\n    method: 'post'\r\n  })\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/message.js","<template>\r\n  <div class=\"my-message view-list\">\r\n    <div class=\"header-sub\">\r\n      <div class=\"title\">\r\n        <div class=\"breadcrumb-item-link\">我的提醒</div>\r\n        <span class=\"empty\"></span>\r\n        <span class=\"t-btn\">\r\n\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"form-ops\">\r\n        <Button :type=\"tabTxt=='0'?'primary':'default'\" style=\"margin-right: 20px\" @click=\"selectTab('0')\">{{$t_p('unread')}}({{pageInfo.totalElements}})</Button>\r\n        <Button :type=\"tabTxt=='1'?'primary':'default'\" @click=\"selectTab('1')\">{{$t_p('read')}}({{pageInfoAll.totalElements}})</Button>\r\n      </div>\r\n      <div class=\"con\" v-show=\"tabTxt=='0'\">\r\n        <div class=\"user-table no-scroll\">\r\n          <Table\r\n            class=\"m-table no-border no-scroll\"\r\n            :loading=\"isQuerying\"\r\n            :row-class-name=\"(row,index)=>index%2===1?'even':''\"\r\n            stripe\r\n            :columns=\"tableColumns\"\r\n            :data=\"tableData\"\r\n            @on-selection-change=\"saveCurrentModuleLocal\"\r\n          ></Table>\r\n        </div>\r\n        <div class=\"pagination\">\r\n          <div class=\"form-ops\">\r\n            <!--<Checkbox value=\"facebook\">\r\n                          <Icon type=\"social-facebook\"></Icon>\r\n            </Checkbox>-->\r\n            <Button style=\"margin-right: 20px\" :class=\"{black:noticeIds.length>0}\" @click=\"delMessage()\" v-if=\"$hasAccess('msg.del')\">{{$t('common.message.delete')}}</Button>\r\n            <Button :class=\"{black:noticeIds.length>0}\" @click=\"setMessage('one')\" v-if=\"$hasAccess('msg.edit')\">{{$t_p('mark_read')}}</Button>\r\n            <!-- <button class=\"black\" @click=\"setMessage('all')\">全部已读</button> -->\r\n          </div>\r\n          <Page\r\n            @on-change=\"onPaginationChange\"\r\n            @on-page-size-change=\"onPaginationSizeChange\"\r\n            :current=\"pageInfo.pageIndex\"\r\n            :page-size=\"pageInfo.pageSize\"\r\n            :total=\"pageInfo.totalElements\"\r\n            show-sizer\r\n            show-total\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"con\" v-show=\"tabTxt=='1'\">\r\n        <div class=\"user-table no-scroll\">\r\n          <Table\r\n            class=\"m-table no-scroll no-border\"\r\n            :loading=\"isQueryingAll\"\r\n            :row-class-name=\"(row,index)=>index%2===1?'even':''\"\r\n            stripe\r\n            :columns=\"tableColumns\"\r\n            :data=\"tableDataAll\"\r\n            @on-selection-change=\"saveCurrentModuleLocal\"\r\n          ></Table>\r\n          <!--<Table class=\"m-table \" :loading=\"isQueryingAll\" :row-class-name=\"(row,index)=>index%2===1?'even':''\" stripe border :columns=\"tableColumns\" :data=\"tableDataAll\"></Table>-->\r\n        </div>\r\n        <div class=\"pagination\">\r\n          <div class=\"button-left\">\r\n            <!--<Checkbox value=\"facebook\">\r\n                          <Icon type=\"social-facebook\"></Icon>\r\n            </Checkbox>-->\r\n            <Button :class=\"{black:noticeIds.length>0}\"  v-if=\"$hasAccess('msg.del')\" @click=\"delMessage()\">{{$t('common.message.delete')}}</Button>\r\n            <!-- <button :class=\"{black:noticeIds.length>0}\" @click=\"setMessage('one')\">标为已读</button> -->\r\n            <!-- <button class=\"black\" @click=\"setMessage('all')\">全部已读</button> -->\r\n          </div>\r\n          <Page\r\n            @on-change=\"onPaginationChangeAll\"\r\n            @on-page-size-change=\"onPaginationSizeChangeAll\"\r\n            :current=\"pageInfoAll.pageIndex\"\r\n            :page-size=\"pageInfoAll.pageSize\"\r\n            :total=\"pageInfoAll.totalElements\"\r\n            show-sizer\r\n            show-total\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {deleteMessage, getMessageList, setMessageReaded} from '../../../../api/message'\r\n\r\n  export default {\r\n  name: \"my-message\",\r\n    i18n_prefix:'page.message-center.my-message',\r\n  data() {\r\n    return {\r\n      tableColumns: [\r\n        {\r\n          type: \"selection\",\r\n          width: 80,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: this.$t_p('reminder_content'),\r\n          key: \"content\",\r\n          align: \"center\",\r\n          // render: (h, params) => {\r\n          //   let content;\r\n          //   params.row.businessType == 5 ? (content=params.row.content) :\r\n          //     (content = JSON.parse(params.row.content));\r\n          //\r\n          //   let isRead = params.row.isRead == 1;\r\n          //   if (content.author != undefined) {\r\n          //     return h(\"div\", [\r\n          //         h(\"span\", {\r\n          //           class: [\"dot-unread\", isRead ? \"hide\" : \"\"].join(\" \")\r\n          //         }),\r\n          //       h(\r\n          //         \"span\",\r\n          //         {\r\n          //           style: {\r\n          //             \"text-decoration\": \"underline\"\r\n          //           },\r\n          //           on: {\r\n          //             click: () => {\r\n          //               this.gotoBack(params.row);\r\n          //             }\r\n          //           }\r\n          //         },\r\n          //           content.deviceGroupName +\r\n          //          \"实际供应压力大于要求供应压力\"\r\n          //       )\r\n          //     ]);\r\n          //   } else  if(content.device_name){\r\n          //     return h(\"div\", [\r\n          //         h(\"span\", {\r\n          //           class: [\"dot-unread\", isRead ? \"hide\" : \"\"].join(\" \")\r\n          //         }),\r\n          //       h(\r\n          //         \"span\",\r\n          //         {\r\n          //           // class: [\"dot-unread\", isRead ? \"hide\" : \"\"].join(\" \")\r\n          //         },\r\n          //         \"[\" +\r\n          //           content.device_name +\r\n          //           \"]\" +\r\n          //           \"[\" +\r\n          //           content.worder_type +\r\n          //           \"]\" +\r\n          //           content.worder_name +\r\n          //           \"，将于\" +\r\n          //           content.businessStartTime +\r\n          //           \"开始\"\r\n          //       )\r\n          //     ]);\r\n          //   } else {\r\n          //       return h(\"div\", [\r\n          //         h(\"span\", {\r\n          //           class: [\"dot-unread\", isRead ? \"hide\" : \"\"].join(\" \")\r\n          //         }),\r\n          //         h(\r\n          //           \"span\",\r\n          //           {\r\n          //             // class: [\"dot-unread\", isRead ? \"hide\" : \"\"].join(\" \")\r\n          //           },\r\n          //           content\r\n          //         )\r\n          //       ]);\r\n          //   }\r\n          // }\r\n        },\r\n        {\r\n          title: this.$t_p('send_time'),\r\n          key: \"noticeTimeStr\",\r\n          align: \"center\"\r\n        }\r\n      ],\r\n      tableData: [],\r\n      pageInfo: {\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        totalElements: 0\r\n      },\r\n      isQuerying: false,\r\n\r\n      tableDataAll: [],\r\n      pageInfoAll: {\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        totalElements: 0\r\n      },\r\n      isQueryingAll: false,\r\n      tabTxt: \"0\",\r\n      noticeIds: []\r\n    };\r\n  },\r\n  watch: {\r\n    tabTxt() {\r\n      if (this.tabTxt == \"0\") {\r\n        this.loadTableData(true);\r\n      } else {\r\n        this.loadTableDataAll(true);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    gotoBack(item) {\r\n      if (item.businessType == 3) {\r\n        this.$router.push({\r\n          name: \"device-summary-grouo-detail\",\r\n          params: {\r\n            id: item.businessId\r\n          }\r\n        });\r\n      } else {\r\n        return;\r\n      }\r\n    },\r\n    loadTableData(clear) {\r\n      if (clear) {\r\n        this.pageInfo.pageIndex = 1;\r\n      }\r\n      this.pageInfo.loading = true;\r\n      getMessageList({\r\n        pageNumber: this.pageInfo.pageIndex,\r\n        pageSize: this.pageInfo.pageSize,\r\n        isRead: 0\r\n      })\r\n        .then(res => {\r\n          // console.log(111,res)\r\n          this.tableData = (res.data.result || []).map(d => ({\r\n            ...d\r\n          }));\r\n          this.pageInfo.totalElements = res.data.totalElements || 0;\r\n        })\r\n        .finally(() => {\r\n          this.pageInfo.loading = false;\r\n        });\r\n    },\r\n    onPaginationChange(index) {\r\n      this.pageInfo.pageIndex = index;\r\n      this.loadTableData(false);\r\n    },\r\n    onPaginationSizeChange(size) {\r\n      this.pageInfo.pageSize = size;\r\n      this.loadTableData(true);\r\n    },\r\n\r\n    loadTableDataAll(clear) {\r\n      if (clear) {\r\n        this.pageInfoAll.pageIndex = 1;\r\n      }\r\n      this.pageInfoAll.loading = true;\r\n      getMessageList({\r\n        pageNumber: this.pageInfoAll.pageIndex,\r\n        pageSize: this.pageInfoAll.pageSize,\r\n        isRead: 1\r\n      })\r\n        .then(res => {\r\n          // this.tableDataAll = (res.data.result || []).map(d =>{\r\n          // \tretrun d.isRead =1\r\n          // });\r\n          this.tableDataAll = (res.data.result || []).filter(d => {\r\n            return d.isRead == 1;\r\n          });\r\n          this.pageInfoAll.totalElements = res.data.totalElements || 0;\r\n        })\r\n        .finally(() => {\r\n          this.pageInfoAll.loading = false;\r\n        });\r\n    },\r\n    onPaginationChangeAll(index) {\r\n      this.pageInfoAll.pageIndex = index;\r\n      this.loadTableDataAll(false);\r\n    },\r\n    onPaginationSizeChangeAll(size) {\r\n      this.pageInfoAll.pageSize = size;\r\n      this.loadTableDataAll(true);\r\n    },\r\n    deleteSelection() {\r\n      // let uInfo = this.tableData[params.index];\r\n      // this.$router.push({name: \"roleEdit\", params: {roleId: uInfo.roleId}});\r\n    },\r\n    selectTab(txt) {\r\n      this.tabTxt = txt;\r\n      this.noticeIds = [];\r\n    },\r\n    //消息设为已读\r\n    setMessage(name) {\r\n      if (name == \"one\") {\r\n        if (this.noticeIds.length > 0) {\r\n          setMessageReaded({\r\n            noticeIds: this.noticeIds\r\n          }).then(res => {\r\n            this.loadTableData(true);\r\n            this.loadTableDataAll(true);\r\n            this.noticeIds = [];\r\n          });\r\n        }\r\n      } else {\r\n        setMessageReaded({\r\n          noticeIds: this.noticeIds\r\n        }).then(res => {\r\n          this.loadTableData(true);\r\n          this.loadTableDataAll(true);\r\n          this.noticeIds = [];\r\n        });\r\n      }\r\n    },\r\n    //删除\r\n    delMessage() {\r\n      deleteMessage({\r\n        noticeIds: this.noticeIds\r\n      }).then(res => {\r\n        this.loadTableData(true);\r\n        this.loadTableDataAll(true);\r\n        this.noticeIds = [];\r\n      });\r\n    },\r\n    saveCurrentModuleLocal(nodes) {\r\n      // console.log(nodes)\r\n\r\n      let modules = [];\r\n\r\n      //再加入\r\n      nodes.forEach(n => {\r\n        modules.push(n.id);\r\n      });\r\n      this.noticeIds = modules;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTableData(true);\r\n    this.loadTableDataAll(true);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../../../../style/varient\";\r\n.user-table {\r\n}\r\n\r\n.dot-unread {\r\n  display: inline-block;\r\n  width: 8px;\r\n  height: 8px;\r\n  background: @color-primary;\r\n  border-radius: 2px;\r\n  margin-right: 10px;\r\n  &.hide {\r\n    visibility: hidden;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../../../../style/varient\";\r\n@size-padding: 10px;\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/message-center/components/my-message/my-message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-message view-list\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"form-ops\"},[_c('Button',{staticStyle:{\"margin-right\":\"20px\"},attrs:{\"type\":_vm.tabTxt=='0'?'primary':'default'},on:{\"click\":function($event){_vm.selectTab('0')}}},[_vm._v(_vm._s(_vm.$t_p('unread'))+\"(\"+_vm._s(_vm.pageInfo.totalElements)+\")\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":_vm.tabTxt=='1'?'primary':'default'},on:{\"click\":function($event){_vm.selectTab('1')}}},[_vm._v(_vm._s(_vm.$t_p('read'))+\"(\"+_vm._s(_vm.pageInfoAll.totalElements)+\")\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tabTxt=='0'),expression:\"tabTxt=='0'\"}],staticClass:\"con\"},[_c('div',{staticClass:\"user-table no-scroll\"},[_c('Table',{staticClass:\"m-table no-border no-scroll\",attrs:{\"loading\":_vm.isQuerying,\"row-class-name\":function (row,index){ return index%2===1?'even':''; },\"stripe\":\"\",\"columns\":_vm.tableColumns,\"data\":_vm.tableData},on:{\"on-selection-change\":_vm.saveCurrentModuleLocal}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('div',{staticClass:\"form-ops\"},[(_vm.$hasAccess('msg.del'))?_c('Button',{class:{black:_vm.noticeIds.length>0},staticStyle:{\"margin-right\":\"20px\"},on:{\"click\":function($event){_vm.delMessage()}}},[_vm._v(_vm._s(_vm.$t('common.message.delete')))]):_vm._e(),_vm._v(\" \"),(_vm.$hasAccess('msg.edit'))?_c('Button',{class:{black:_vm.noticeIds.length>0},on:{\"click\":function($event){_vm.setMessage('one')}}},[_vm._v(_vm._s(_vm.$t_p('mark_read')))]):_vm._e()],1),_vm._v(\" \"),_c('Page',{attrs:{\"current\":_vm.pageInfo.pageIndex,\"page-size\":_vm.pageInfo.pageSize,\"total\":_vm.pageInfo.totalElements,\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.onPaginationChange,\"on-page-size-change\":_vm.onPaginationSizeChange}})],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tabTxt=='1'),expression:\"tabTxt=='1'\"}],staticClass:\"con\"},[_c('div',{staticClass:\"user-table no-scroll\"},[_c('Table',{staticClass:\"m-table no-scroll no-border\",attrs:{\"loading\":_vm.isQueryingAll,\"row-class-name\":function (row,index){ return index%2===1?'even':''; },\"stripe\":\"\",\"columns\":_vm.tableColumns,\"data\":_vm.tableDataAll},on:{\"on-selection-change\":_vm.saveCurrentModuleLocal}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('div',{staticClass:\"button-left\"},[(_vm.$hasAccess('msg.del'))?_c('Button',{class:{black:_vm.noticeIds.length>0},on:{\"click\":function($event){_vm.delMessage()}}},[_vm._v(_vm._s(_vm.$t('common.message.delete')))]):_vm._e()],1),_vm._v(\" \"),_c('Page',{attrs:{\"current\":_vm.pageInfoAll.pageIndex,\"page-size\":_vm.pageInfoAll.pageSize,\"total\":_vm.pageInfoAll.totalElements,\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.onPaginationChangeAll,\"on-page-size-change\":_vm.onPaginationSizeChangeAll}})],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-sub\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"breadcrumb-item-link\"},[_vm._v(\"我的提醒\")]),_vm._v(\" \"),_c('span',{staticClass:\"empty\"}),_vm._v(\" \"),_c('span',{staticClass:\"t-btn\"})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1da96c10\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/message-center/components/my-message/my-message.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1da96c10\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":55}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./my-message.vue\")\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1da96c10\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":55}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./my-message.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./my-message.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1da96c10\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./my-message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1da96c10\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/message-center/components/my-message/my-message.vue\n// module id = null\n// module chunks = ","import Main from './my-message.vue'\r\n\r\nexport default Main\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/message-center/components/my-message/index.js"],"sourceRoot":""}