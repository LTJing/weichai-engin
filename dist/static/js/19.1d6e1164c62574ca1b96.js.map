{"version":3,"sources":["webpack:///src/view/health-manage/components/health-check-list/health-check-list.vue","webpack:///./src/view/health-manage/components/health-check-list/health-check-list.vue?ae61","webpack:///./src/view/health-manage/components/health-check-list/health-check-list.vue","webpack:///./src/view/health-manage/components/health-check-list/index.js","webpack:///./src/api/work.js"],"names":["health_check_list","components","StatusSelect","device_select","LaboratoryList","laboratory_list","customDrawer","common_drawer","data","_this","this","search","errorType","errorDesc","deviceName","pageInfo","loading","pageIndex","pageSize","totalElements","tableData","maxlength","selectLocation","tableColumns","title","key","align","width","ellipsis","tooltip","render","h","params","class","style","marginLeft","color","on","click","goDetail","row","props","placement","height","display","column","_width","overflow","textOverflow","whiteSpace","result","slot","wordBreak","currentIndex","formList","label","type","value","placeholder","name","formValue","formValidate","required","message","deviceType","deviceModel","deviceCode","methods","selectTree","e","addr","getlocation","longitude","lng","latitude","lat","getType","loadTableData","_this2","_pageInfo","pageNumber","Object","device","extends_default","then","res","code","$router","push","path","query","treeId","dataId","id","showDrawer","_this3","val","JSON","parse","stringify_default","deviceTypeId","parentDeviceId","Number","$refs","drawer","open","$Modal","confirm","$t","$flexible","content","onOk","work","$Message","success","msg","warning","onRowClick","onPaginationChange","index","onPaginationSizeChange","size","rowClassName","_this4","console","log","state","deviceStatus","close","mounted","health_check_list_health_check_list","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","clearable","nativeOn","keyup","$event","_k","keyCode","model","callback","$$v","$set","expression","staticStyle","min-height","stripe","columns","row-class-name","on-row-click","current","page-size","total","show-elevator","show-sizer","show-total","on-change","on-page-size-change","ref","staticRenderFns","components_health_check_list_health_check_list","__webpack_require__","normalizeComponent","ssrContext","Main","deviceList","axios","request","url","method","updateDeviceList","deleteDeviceList","addDeviceList"],"mappings":"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","file":"static/js/19.1d6e1164c62574ca1b96.js","sourcesContent":["<template>\r\n  <div class=\"list\">\r\n    <div class=\"content\">\r\n      <div class=\"header-sub\">\r\n        <div class=\"title\">\r\n          <div class=\"breadcrumb-item-link\">健康诊断</div>\r\n          <span class=\"empty\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter-search\">\r\n        <div class=\"filter-search-left\">\r\n          <div class=\"filter-input mr-12\">\r\n            <Input\r\n              placeholder=\"请输入设备名称\"\r\n              v-model=\"search.deviceName\"\r\n              clearable\r\n              @keyup.enter.native=\"loadTableData\"\r\n            />\r\n          </div>\r\n          <div class=\"filter-input mr-12\">\r\n            <Input\r\n              placeholder=\"请输入故障类型\"\r\n              v-model=\"search.errorType\"\r\n              clearable\r\n              @keyup.enter.native=\"loadTableData\"\r\n            />\r\n          </div>\r\n          <div class=\"filter-input mr-12\">\r\n            <Input\r\n              placeholder=\"请输入故障内容\"\r\n              v-model=\"search.errorDesc\"\r\n              clearable\r\n              @keyup.enter.native=\"loadTableData\"\r\n            />\r\n          </div>\r\n          <div class=\"filter-btn\">\r\n            <Button @click=\"loadTableData\" class=\"search-btn\" type=\"default\">\r\n              <span class=\"iconfont icon-chazhao\"></span>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"user-table\">\r\n        <Table\r\n          class=\"m-table no-scroll no-border\"\r\n          stripe\r\n          :loading=\"pageInfo.loading\"\r\n          :columns=\"tableColumns\"\r\n          :row-class-name=\"rowClassName\"\r\n          @on-row-click=\"onRowClick\"\r\n          :data=\"tableData\"\r\n          style=\"min-height:600px\"\r\n        ></Table>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <Page\r\n          @on-change=\"onPaginationChange\"\r\n          @on-page-size-change=\"onPaginationSizeChange\"\r\n          :current=\"pageInfo.pageIndex\"\r\n          :page-size=\"pageInfo.pageSize\"\r\n          :total=\"pageInfo.totalElements\"\r\n          show-elevator\r\n          show-sizer\r\n          show-total\r\n        />\r\n      </div>\r\n      <custom-drawer\r\n        ref=\"drawer\"\r\n        :title=\"title\"\r\n        :formValidate=\"formValidate\"\r\n        :formList=\"formList\"\r\n        v-model=\"formValue\"\r\n        @selectTree=\"selectTree\"\r\n        @getlocation=\"getlocation\"\r\n        :selectLocation=\"selectLocation\"\r\n        @confirm=\"confirm\"\r\n      ></custom-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StatusSelect from '@/components/device-select'\r\nimport LaboratoryList from '@/components/laboratory-list'\r\nimport customDrawer from '@/components/common-drawer/common-drawer'\r\nimport { updateDeviceList, deleteDeviceList, addDeviceList } from '@/api/work'\r\nimport { getHealthList } from '@/api/device'\r\nexport default {\r\n  components: {\r\n    StatusSelect,\r\n    LaboratoryList,\r\n    customDrawer\r\n  },\r\n  data () {\r\n    return {\r\n      search: {\r\n        errorType: '',\r\n        errorDesc: '',\r\n        deviceName: ''\r\n      },\r\n      pageInfo: {\r\n        loading: false,\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        totalElements: 30\r\n      },\r\n      tableData: [],\r\n      maxlength: 50,\r\n      selectLocation: '',\r\n      tableColumns: [\r\n        {\r\n          title: '设备名称',\r\n          key: 'deviceName',\r\n          align: 'left'\r\n        },\r\n\r\n        {\r\n          title: '设备编号',\r\n          key: 'deviceCode',\r\n          align: 'left',\r\n          width: 120\r\n        },\r\n        {\r\n          title: '故障类型',\r\n          key: 'errorType',\r\n          align: 'left',\r\n          width: 120\r\n        },\r\n        {\r\n          title: '故障等级',\r\n          key: 'malLevel',\r\n          align: 'left',\r\n          width: 100\r\n        },\r\n        {\r\n          title: '故障内容',\r\n          key: 'errorDesc',\r\n          align: 'left',\r\n          ellipsis: true,\r\n          tooltip: true\r\n        },\r\n        {\r\n          title: '测点名称',\r\n          key: 'itemCode',\r\n          align: 'left',\r\n          width: 100\r\n        },\r\n        {\r\n          title: '测点值',\r\n          key: 'itemValue',\r\n          align: 'left',\r\n          width: 100\r\n        },\r\n        {\r\n          title: '报警时间',\r\n          key: 'alertTime',\r\n          align: 'left'\r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action',\r\n          // width: 120,\r\n          align: 'left',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h(\r\n                'span',\r\n                {\r\n                  class: 'primary',\r\n                  style: {\r\n                    marginLeft: 0,\r\n                    color: '#0084FF'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.goDetail(params.row, 1)\r\n                    }\r\n                  }\r\n                },\r\n                '故障树诊断'\r\n              ),\r\n              h(\r\n                'span',\r\n                {\r\n                  class: 'primary',\r\n                  style: {\r\n                    marginLeft: 0,\r\n                    color: '#6EAD16'\r\n\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.goDetail(params.row, 2)\r\n                    }\r\n                  }\r\n                },\r\n                '模型诊断'\r\n              )\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          title: '诊断结果',\r\n          key: 'result',\r\n          align: 'left',\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h(\r\n                'Tooltip',\r\n                {\r\n                  props: { placement: 'top' },\r\n                  style: {\r\n                    height: 'fit-content'\r\n                  }\r\n                },\r\n                [\r\n                  h(\r\n                    'span',\r\n                    {\r\n                      style: {\r\n                        display: 'inline-block',\r\n                        width: params.column._width * 0.9 + 'px',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        whiteSpace: 'nowrap'\r\n                      }\r\n                    },\r\n                    params.row.result\r\n                  ),\r\n                  h(\r\n                    'span',\r\n                    {\r\n                      slot: 'content',\r\n                      style: { whiteSpace: 'normal', wordBreak: 'break-all' }\r\n                    },\r\n                    params.row.result\r\n                  )\r\n                ]\r\n              )\r\n            ])\r\n          }\r\n        }\r\n      ],\r\n      currentIndex: 0,\r\n      title: '',\r\n      formList: [\r\n        {\r\n          label: '设备名称',\r\n          type: 'input',\r\n          value: 'deviceName'\r\n        },\r\n        {\r\n          label: '设备类型',\r\n          type: 'select',\r\n          value: 'deviceType',\r\n          data: []\r\n        },\r\n        {\r\n          label: '设备型号',\r\n          type: 'select',\r\n          value: 'deviceModel',\r\n          data: []\r\n        },\r\n        {\r\n          label: '设备编码',\r\n          type: 'input',\r\n          value: 'deviceCode',\r\n          data: []\r\n        },\r\n        {\r\n          label: '坐标',\r\n          type: 'locationSelect',\r\n          value: 'addrCode',\r\n          placeholder: '请选择坐标'\r\n        },\r\n        {\r\n          label: '父级设备',\r\n          type: 'select',\r\n          value: 'parentDeviceId',\r\n          placeholder: '请选择父级设备',\r\n          data: []\r\n        },\r\n        {\r\n          label: '控制场景',\r\n          value: 'deviceControlMode',\r\n          type: 'radio',\r\n          data: [\r\n            { name: '单机FCU控制', value: 'SINGLE_FCU' },\r\n            { name: '整机FCU控制', value: 'ALL_FCU' },\r\n            { name: 'PCS控制', value: 'PCS' },\r\n            { name: '电池控制', value: 'BATTERY' }\r\n          ]\r\n        }\r\n      ],\r\n      formValue: {},\r\n      formValidate: {\r\n        deviceName: [{ required: true, message: '设备名称不能为空' }],\r\n        deviceType: [{ required: true, message: '设备类型不能为空' }],\r\n        deviceModel: [{ required: true, message: '设备型号不能为空' }],\r\n        deviceCode: [{ required: true, message: '设备编码不能为空' }]\r\n      },\r\n      type: ''\r\n    }\r\n  },\r\n  methods: {\r\n    selectTree (e) {\r\n      this.formValue.addr = e\r\n    },\r\n    getlocation (e) {\r\n      this.formValue.longitude = e.lng\r\n      this.formValue.latitude = e.lat\r\n    },\r\n    getType () {},\r\n    loadTableData () {\r\n      let { pageSize, pageIndex: pageNumber } = this.pageInfo\r\n      this.pageInfo.loading = true\r\n      getHealthList({ pageSize, pageNumber, ...this.search }).then(res => {\r\n        let { code, data } = res\r\n        this.pageInfo.loading = false\r\n        if (code === 200) {\r\n          this.tableData = data.result\r\n          this.pageInfo.totalElements = data.totalElements\r\n        }\r\n      })\r\n    },\r\n    goDetail (params, type) {\r\n      if (type === 1) {\r\n        this.$router.push({\r\n          path: '/health-detail',\r\n          query: {\r\n            treeId: params.treeId,\r\n            deviceName: params.deviceName,\r\n            dataId: params.id\r\n          }\r\n        })\r\n      } else {\r\n        this.$router.push({\r\n          path: '/model-detail',\r\n          query: {\r\n            treeId: params.treeId,\r\n            deviceName: params.deviceName,\r\n            dataId: params.id\r\n          }\r\n        })\r\n      }\r\n    },\r\n    showDrawer (type, params) {\r\n      if (type !== 'delete') {\r\n        if (type === 'add') {\r\n          this.title = '新建设备'\r\n          this.formValue = {}\r\n          this.selectLocation = '119.209927,36.725914'\r\n          this.formValue.longitude = '119.209927'\r\n          this.formValue.latitude = '36.725914'\r\n        } else {\r\n          let val = JSON.parse(JSON.stringify(params))\r\n          this.title = '编辑设备'\r\n          this.formValue = val\r\n          this.formValue.deviceType = val.deviceTypeId\r\n          this.formValue.parentDeviceId = Number(val.parentDeviceId)\r\n          if (val.longitude && val.latitude) {\r\n            this.selectLocation = val.longitude + ',' + val.latitude\r\n          } else {\r\n            this.selectLocation = '119.209927,36.725914'\r\n            this.formValue.longitude = '119.209927'\r\n            this.formValue.latitude = '36.725914'\r\n          }\r\n        }\r\n        this.type = type\r\n        this.$refs.drawer.open()\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: this.$t('common.text.prompt'),\r\n          width: this.$flexible(450),\r\n          content:\r\n            this.$t('common.text.confirm_title', {\r\n              name: '设备名称'\r\n            }) + `[${params.deviceName}]的设备吗?`,\r\n          onOk: () => {\r\n            deleteDeviceList({ id: params.id }).then(\r\n              res => {\r\n                if (res.code === 200) {\r\n                  this.$Message.success(res.msg)\r\n                  this.loadTableData()\r\n                } else {\r\n                  this.$Message.warning(res.msg)\r\n                }\r\n              },\r\n              res => {\r\n                this.$Message.warning(res.msg)\r\n              }\r\n            )\r\n          }\r\n        })\r\n      }\r\n    },\r\n    onRowClick (e) {},\r\n    onPaginationChange (index) {\r\n      this.pageInfo.pageIndex = index\r\n      this.loadTableData(false)\r\n    },\r\n    onPaginationSizeChange (size) {\r\n      this.pageInfo.pageSize = size\r\n      this.loadTableData(true)\r\n    },\r\n    rowClassName (row, index) {\r\n      if (row.id == this.currentIndex) {\r\n        return 'demo-table-info-row'\r\n      }\r\n    },\r\n    confirm () {\r\n      console.log(this.formValue)\r\n      this.formValue.state = this.formValue.deviceStatus\r\n      if (this.type === 'edit') {\r\n        updateDeviceList({ ...this.formValue }).then(res => {\r\n          let { code, msg } = res\r\n          if (code === 200) {\r\n            this.$Message.success(this.$t('common.message.edit_success'))\r\n            this.loadTableData()\r\n            this.$refs.drawer.close()\r\n            this.getType()\r\n          } else {\r\n            this.$Message.warning(msg)\r\n          }\r\n        })\r\n      } else {\r\n        addDeviceList({ ...this.formValue }).then(res => {\r\n          let { code, msg } = res\r\n          if (code === 200) {\r\n            this.$Message.success(this.$t('common.message.add_success'))\r\n            this.loadTableData()\r\n            this.getType()\r\n            this.$refs.drawer.close()\r\n          } else {\r\n            this.$Message.warning(msg)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.loadTableData()\r\n    this.getType()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../../../../style/varient.less\";\r\n@size-padding: 10px;\r\n/deep/.ivu-page-options-elevator input {\r\n  padding-left: 0.1rem !important;\r\n  text-align: center;\r\n}\r\n.list {\r\n  width: 100%;\r\n  height: 100%;\r\n  .content {\r\n    width: 100%;\r\n    height: 100%;\r\n    box-shadow: 0px -1px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*上边阴影  红色*/ -1px 0px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*左边阴影  绿色*/ 1px 0px 2px 0px rgba(0, 0, 0, 0.05),\r\n      /*右边阴影  蓝色*/ 0px 1px 2px 0px rgba(0, 0, 0, 0.05); /*下边阴影  黄色*/\r\n    padding: 24px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/health-manage/components/health-check-list/health-check-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"content\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"filter-search\"},[_c('div',{staticClass:\"filter-search-left\"},[_c('div',{staticClass:\"filter-input mr-12\"},[_c('Input',{attrs:{\"placeholder\":\"请输入设备名称\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.loadTableData($event)}},model:{value:(_vm.search.deviceName),callback:function ($$v) {_vm.$set(_vm.search, \"deviceName\", $$v)},expression:\"search.deviceName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-input mr-12\"},[_c('Input',{attrs:{\"placeholder\":\"请输入故障类型\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.loadTableData($event)}},model:{value:(_vm.search.errorType),callback:function ($$v) {_vm.$set(_vm.search, \"errorType\", $$v)},expression:\"search.errorType\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-input mr-12\"},[_c('Input',{attrs:{\"placeholder\":\"请输入故障内容\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.loadTableData($event)}},model:{value:(_vm.search.errorDesc),callback:function ($$v) {_vm.$set(_vm.search, \"errorDesc\", $$v)},expression:\"search.errorDesc\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-btn\"},[_c('Button',{staticClass:\"search-btn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.loadTableData}},[_c('span',{staticClass:\"iconfont icon-chazhao\"})])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"user-table\"},[_c('Table',{staticClass:\"m-table no-scroll no-border\",staticStyle:{\"min-height\":\"600px\"},attrs:{\"stripe\":\"\",\"loading\":_vm.pageInfo.loading,\"columns\":_vm.tableColumns,\"row-class-name\":_vm.rowClassName,\"data\":_vm.tableData},on:{\"on-row-click\":_vm.onRowClick}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('Page',{attrs:{\"current\":_vm.pageInfo.pageIndex,\"page-size\":_vm.pageInfo.pageSize,\"total\":_vm.pageInfo.totalElements,\"show-elevator\":\"\",\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.onPaginationChange,\"on-page-size-change\":_vm.onPaginationSizeChange}})],1),_vm._v(\" \"),_c('custom-drawer',{ref:\"drawer\",attrs:{\"title\":_vm.title,\"formValidate\":_vm.formValidate,\"formList\":_vm.formList,\"selectLocation\":_vm.selectLocation},on:{\"selectTree\":_vm.selectTree,\"getlocation\":_vm.getlocation,\"confirm\":_vm.confirm},model:{value:(_vm.formValue),callback:function ($$v) {_vm.formValue=$$v},expression:\"formValue\"}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-sub\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"breadcrumb-item-link\"},[_vm._v(\"健康诊断\")]),_vm._v(\" \"),_c('span',{staticClass:\"empty\"})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4202eac2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/health-manage/components/health-check-list/health-check-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4202eac2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":55}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./health-check-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./health-check-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./health-check-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4202eac2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./health-check-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4202eac2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/health-manage/components/health-check-list/health-check-list.vue\n// module id = null\n// module chunks = ","import Main from './health-check-list.vue'\r\n\r\nexport default Main\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/health-manage/components/health-check-list/index.js","import axios from '@/libs/api.request'\r\n\r\nexport const getListAll = ({}) => {\r\n  const data = {}\r\n  return axios.request({\r\n    url: '/maintainInfo/listMaintainInfoAll',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const listMalfunctionInfoTree = ({}) => {\r\n  const data = {}\r\n  return axios.request({\r\n    url: '/malfunctionInfo/listMalfunctionInfoTree',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const listMaintainInfoTree = ({}) => {\r\n  const data = {}\r\n  return axios.request({\r\n    url: '/maintainInfo/listMalfunctionInfoTree',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getWorkList = ({pageNumber = 0, pageSize = 10, worderType, name, status}) => {\r\n  const data = {\r\n    pageNumber,\r\n    pageSize,\r\n    worderType,\r\n    name,\r\n    status\r\n  }\r\n  return axios.request({\r\n    url: '/order/list',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const addWork = ({\r\n  id,\r\n  worderType,\r\n  planIds,\r\n  deviceId,\r\n  maintainId,\r\n  malfunctionId,\r\n  name,\r\n  templateId,\r\n  fileIds,\r\n  principal = [],\r\n  executive = [],\r\n  remark\r\n}) => {\r\n  const data = {\r\n    id,\r\n    worderType,\r\n    planIds,\r\n    deviceId,\r\n    maintainId,\r\n    malfunctionId,\r\n    fileIds,\r\n    name,\r\n    templateId,\r\n    principal: principal.join(','),\r\n    executive: executive.join(','),\r\n    remark\r\n  }\r\n  return axios.request({\r\n    url: '/order/save',\r\n    data,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport const editWork = ({\r\n  id,\r\n  worderType,\r\n  planIds,\r\n  deviceId,\r\n  malfunctionId,\r\n  name,\r\n  templateId,\r\n  fileIds,\r\n  principal = [],\r\n  executive = [],\r\n  remark\r\n}) => {\r\n  const data = {\r\n    id,\r\n    worderType,\r\n    planIds,\r\n    deviceId,\r\n    malfunctionId,\r\n    fileIds,\r\n    name,\r\n    templateId,\r\n    principal: principal.join(','),\r\n    executive: executive.join(','),\r\n    remark\r\n  }\r\n  return axios.request({\r\n    url: '/order/edit',\r\n    data,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\n// 工单流水\r\nexport const getHistoryList = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/history',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 基本信息\r\nexport const getOrderBase = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/detail',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 工单是否能被编辑\r\nexport const orderIsEdit = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/canEdit',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 编辑基本信息\r\nexport const getOrderBaseEdit = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/getDetail',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 故障代码\r\nexport const getOrderCode = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/code',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 报告\r\nexport const getOrderReport = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/report',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 按钮显示控制\r\nexport const menuPermission = ({id}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/menuPermission',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 切换状态\r\nexport const changeStatus = ({\r\n  id,\r\n  userIds = [],\r\n  description,\r\n  reason,\r\n  method,\r\n  type,\r\n  reports,\r\n  isKnowledge\r\n}) => {\r\n  const data = {\r\n    id,\r\n    userIds: userIds.join(','),\r\n    description,\r\n    reason,\r\n    method,\r\n    type,\r\n    reports,\r\n    isKnowledge\r\n  }\r\n  return axios.request({\r\n    url: '/order/changeStatus',\r\n    data: data,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\n// 保养清单\r\nexport const getMaintenance = ({\r\n  id,\r\n  pageNumber,\r\n  pageSize\r\n}) => {\r\n  const data = {\r\n    id,\r\n    pageNumber,\r\n    pageSize\r\n  }\r\n  return axios.request({\r\n    url: '/order/maintenanceList',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 工单删除\r\nexport const orderDelete = ({\r\n  id\r\n}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/order/del',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 设备清单\r\nexport const deviceList = (params) => {\r\n  return axios.request({\r\n    url: '/order/getDevice',\r\n    params,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const updateDeviceList = (params) => {\r\n  return axios.request({\r\n    url: '/device/editDevice',\r\n    data: params,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport const deleteDeviceList = (params) => {\r\n  return axios.request({\r\n    url: '/device/delDevice',\r\n    data: params,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport const addDeviceList = (params) => {\r\n  return axios.request({\r\n    url: '/device/addDevice',\r\n    data: params,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\n// 报告模板\r\nexport const templateList = (type, name, pageNumber, pageSize) => {\r\n  const data = {\r\n    type, name, pageNumber, pageSize\r\n  }\r\n  return axios.request({\r\n    url: '/template/pageList',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 保养项目\r\nexport const maintainItem = ({\r\n  deviceId\r\n}) => {\r\n  const data = {\r\n    deviceId\r\n  }\r\n  return axios.request({\r\n    url: '/maintenance/getMaintenanceItem',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 是否显示负责人\r\nexport const isShowPrincipal = ({\r\n  deviceId,\r\n  worderType\r\n}) => {\r\n  const data = {\r\n    deviceId,\r\n    worderType\r\n  }\r\n  return axios.request({\r\n    url: '/order/hasPrincipal',\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 根据设备id查找故障代码\r\nexport const listMalfunctionInfoD = ({\r\n  id\r\n}) => {\r\n  const data = {\r\n    id\r\n  }\r\n  return axios.request({\r\n    url: '/malfunctionInfo/listMalfunctionInfoByDeviceId/' + id,\r\n    // params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const listMalfunctionInfoAll = ({}) => {\r\n  const data = {}\r\n  return axios.request({\r\n    url: '/malfunctionInfo/listMalfunctionInfoAll',\r\n    // params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 根据设备id查找故障代码\r\nexport const listMalfunctionInfoM = ({\r\n  id\r\n}) => {\r\n  return axios.request({\r\n    url: '/malfunctionInfo/listMalfunctionInfoByModelId/' + id,\r\n    // params: data,\r\n    method: 'get'\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/work.js"],"sourceRoot":""}