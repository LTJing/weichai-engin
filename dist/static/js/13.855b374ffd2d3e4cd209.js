webpackJsonp([13],{FBOd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("RWfK"),n=a("Xxa5"),s=a.n(n),o=a("exGp"),r=a.n(o),l=a("BO1k"),c=a.n(l),d=a("BTaQ"),u=a("xV2B"),v={name:"single-device",components:{Select:d.Select},data:function(){return{deviceList:[{id:1,name:"设备总数",icon:"icon-shebei1",type:"device_total",value:"",unit:"台",bg:"rgba(0, 132, 255, .2)",color:"rgba(0, 132, 255, 1)"},{id:2,name:"运维人员总数",icon:"icon-renyuan",unit:"人",type:"maintenance_total",value:"",color:"rgba(0, 195, 225, 1)",bg:"rgba(0, 195, 225, .2)"},{id:3,name:"开机数量",icon:"icon-a-kaiji1",unit:"台",type:"boot_up_total",value:"",bg:"rgba(28, 201, 108, .2)",color:"rgba(28, 201, 108, 1)"},{id:4,name:"发电数量",icon:"icon-fadianji",unit:"台",type:"power_generation_total",value:"",bg:"rgba(26, 62, 245, .2)",color:"rgba(26, 62, 245, 0.97)"},{id:5,name:"故障数量",icon:"icon-a-guzhang2",unit:"个",type:"fault_total",value:"",bg:"rgba(241, 33, 33, .2)",color:"rgba(241, 33, 33, 1)"}],search:{location:"",status:""},deviceTableColumns:[{title:"型号",key:"device",align:"left",ellipsis:!0,tooltip:!0},{title:"子系统型号",key:"subDevice",align:"left",ellipsis:!0,tooltip:!0},{title:"联系方式",key:"content",align:"left",ellipsis:!0,tooltip:!0}],dangerTableColumns:[{title:"设备名称",key:"deviceName",align:"left"},{title:"告警信息",key:"errorDesc",align:"left",ellipsis:!0,tooltip:!0},{title:"告警时间",key:"alertTime",align:"left",ellipsis:!0,tooltip:!0}],dangerTableData:[],screen:"",loading:{deviceTable:!1,dangerTable:!1},deviceCurrentIndex:0,dangerCurrentIndex:0,financialList:[{id:1,name:"累计总发电",type:"POWER_TOTAL",num:"130",symbol:"kWh"},{id:2,name:"当日总发电",type:"POWER_DAILY",num:"130",symbol:"kWh"},{id:3,name:"累计上网电",type:"ONLINE_POWER_TOTAL",num:"130",symbol:"kWh"},{id:4,name:"碳减排",type:"CARBON_REDUCE_TOTAL",num:"130",symbol:"t"},{id:5,name:"累计水耗",type:"WATER_CONSUMPTION_TOTAL",num:"130",symbol:"kg"},{id:6,name:"累计气耗",type:"GAS_CONSUMPTION_TOTAL",num:"130",symbol:"m³"}],performenceList:[{id:1,name:"历史最高效率",num:"96",icon:"icon-zuigao",bg:"rgb(23, 80, 236, .2)",type:"HISTORY_MAX_POWER_EFFICIENCY",color:"#1750EC"},{id:2,name:"历史最大效率",num:"96",icon:"icon-zuida",bg:"rgba(0, 132, 255, .2)",type:"HISTORY_MAX_POWER_EFFICIENCY",color:"#0084FF"},{id:3,name:"历史平均效率",num:"96",icon:"icon-pingjun",bg:"rgba(36, 204, 53, .2)",type:"HISTORY_MAX_AVG_POWER_EFFICIENCY",color:"#24CC35"}],reliableList:[{id:1,name:"发电时长",num:"96",symbol:"/h",icon:"icon-a-guzhang2",bg:"rgba(241, 33, 33, .2)",type:"RUNTIME_TOTAL",color:"#F12121"},{id:2,name:"平均故障次数",num:"96",symbol:"/次",icon:"icon-a-lianhe62",bg:"rgba(250, 197, 22, .2)",type:"DOWN_NUM_AVG_DAILY",color:"#FAC516"},{id:3,name:"累计故障次数",num:"96",symbol:"/次",icon:"icon-shichang",bg:"rgba(255, 118, 0, .2)",type:"FAIL_NUM_TOTAL",color:"#FF7600"}],markerList:[[119.209927,36.725914]],isFull:!1,showModal:!0,location:[119.209927,36.725914],map:{},chartId:"POWER_GENERATION_AMOUNT",chartOptions:[{id:"POWER_GENERATION_AMOUNT",name:"发电量"},{id:"CARBON_EMISSIONS",name:"碳减排"},{id:"WATER_CONSUMPTION",name:"水耗"},{id:"GAS_CONSUMPTION",name:"气耗"},{id:"POWER_GENERATION_EFFICIENCY",name:"发电效率"},{id:"POWER_GENERATION",name:"发电功率"},{id:"RUN_TIME",name:"运行时长"},{id:"FAIL_NUM",name:"故障次数"},{id:"TROUBLE_FREE_OPERATION_TIME",name:"无故障运行时长"},{id:"DOWN_TIME",name:"停机次数"}],showTitle:!0,deviceId:0}},mounted:function(){this.getChartType(),this.getPlatformStatistics(),this.initMap(),this.getDeviceInfo()},methods:{getDeviceInfo:function(){var t=this;Object(u.t)({id:0}).then(function(e){if(200===e.code){var a=e.data,i=!0,n=!1,s=void 0;try{for(var o,r=c()(t.financialList);!(i=(o=r.next()).done);i=!0){var l=o.value;l.num=a.economyIndex[l.type]}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}var d=!0,u=!1,v=void 0;try{for(var h,g=c()(t.performenceList);!(d=(h=g.next()).done);d=!0){var f=h.value;f.num=a.performanceIndex[f.type]}}catch(t){u=!0,v=t}finally{try{!d&&g.return&&g.return()}finally{if(u)throw v}}var m=!0,b=!1,_=void 0;try{for(var p,C=c()(t.reliableList);!(m=(p=C.next()).done);m=!0){var y=p.value;y.num=a.reliabilityIndex[y.type]}}catch(t){b=!0,_=t}finally{try{!m&&C.return&&C.return()}finally{if(b)throw _}}}}),this.loading.dangerTable=!0,Object(u._0)({deviceId:0,pageNumber:1,pageSize:10}).then(function(e){200===e.code&&(t.dangerTableData=e.data.result,t.loading.dangerTable=!1)})},changeChart:function(t){Object(u.e)({deviceId:0,sceneType:t}).then(function(t){200===t.code&&console.log("保存成功")}),this.chartId=t,this.getChartData()},getPlatformStatistics:function(){var t=this;Object(u.M)().then(function(e){if(200===e.code){var a=e.data.data,i=!0,n=!1,s=void 0;try{for(var o,r=c()(t.deviceList);!(i=(o=r.next()).done);i=!0){var l=o.value;l.value=a[l.type]}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}}})},getChartType:function(){var t=this;Object(u.q)({id:0}).then(function(e){200===e.code&&(e.data.sceneType?t.chartId=e.data.sceneType:t.chartId="POWER_GENERATION_AMOUNT",t.getChartData())})},getName:function(t){var e=!0,a=!1,i=void 0;try{for(var n,s=c()(this.chartOptions);!(e=(n=s.next()).done);e=!0){var o=n.value;if(t===o.id)return o.name}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}},ChangeShow:function(t){var e=this;1===t?this.showTitle=!1:setTimeout(function(){e.showTitle=!0},2e3)},getChartData:function(){var t=this,e=this.deviceId,a=this.chartId;Object(u.p)({deviceId:e,businessType:a}).then(function(e){if(200===e.code){var a=e.data.indexs[0],i=a.value.map(function(t){return t.x}),n=a.legend.map(function(t){return t.name}),s=[],o=!0,r=!1,l=void 0;try{for(var d,u=c()(a.legend);!(o=(d=u.next()).done);o=!0){var v=d.value,h=[],g=!0,f=!1,m=void 0;try{for(var b,_=c()(a.value);!(g=(b=_.next()).done);g=!0){var p=b.value;h.push(p[v.key])}}catch(t){f=!0,m=t}finally{try{!g&&_.return&&_.return()}finally{if(f)throw m}}s.push(h)}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}for(var C=[],y=0;y<=s.length-1;y++){var T=t.getColors(y);C.push({name:n[y],data:s[y],type:"line",smooth:!0,itemStyle:{color:T.color},lineStyle:{color:T.color,shadowBlur:6,shadowColor:T.shadowColor,shadowOffsetY:3},emphasis:{label:{show:!0,position:"outside"}}})}var I={series:C,xData:i,legend:n};t.initChart(I)}else{t.initChart({series:[],xData:[],legend:[]})}})},getColors:function(t){switch(t){case 0:return{color:"#1CC96C",shadowColor:"rgba(255, 255, 255, 0.6)"};case 1:return{color:"#FFCE08",shadowColor:"rgba(184, 193, 29, 1)"};case 2:return{color:"#0084FF",shadowColor:"rgba(0, 0, 0, 0.16)"};case 3:return{color:"#ffb980",shadowColor:"rgba(0, 0, 0, 0.66)"}}},initChart:function(t){console.log("初始化");var e=document.getElementById("chart");this.$echarts.dispose(e),this.$echarts.init(e).setOption({xAxis:{type:"category",data:t.xData,axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.6)"}},axisLabel:{color:"rgba(255, 255, 255, 0.6)"},axisTick:{show:!1}},yAxis:{type:"value",scale:!0,splitNumber:5,axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.6)"}},axisLabel:{color:"rgba(255, 255, 255, 0.6)"},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed",color:"rgba(255, 255, 255, 0.6)"}}},grid:{bottom:20,left:60,right:0},tooltip:{show:!0,trigger:"axis"},legend:{data:t.legend,icon:"circle",itemWidth:7,itemHeight:7,right:0,textStyle:{color:"#cccc"}},series:t.series})},changeModal:function(){var t=this;setTimeout(function(){t.showModal=!1},2e3)},initMap:function(){this.map=new AMap.Map("map",{zoom:14,center:this.location}),this.map.setMapStyle("amap://styles/2004f260216ebbad520cb0639fd2d51f");var t=new AMap.InfoWindow({offset:new AMap.Pixel(8,-20),isCustom:!0,anchor:"bottom-left"});this.changeModal(),this.getAddress(this.map,t)},genMarker:function(t,e){var a=this;return r()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,a)}))()},getAddress:function(t,e){var a=this;Object(u.m)().then(function(e){if(200===e.code){var i=[],n=[],s=e.data.data,o=!0,r=!1,l=void 0;try{for(var d,u=c()(s);!(o=(d=u.next()).done);o=!0){var v=d.value;v.latitude&&v.longitude&&i.push([v.longitude,v.latitude,v.deviceId])}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}a.markerList=i,i.forEach(function(t){var e=new AMap.Marker({position:new AMap.LngLat(t[0],t[1]),extData:t[2]});n.push(e),e.on("click",function(t){console.log(t.target.getExtData()),a.$router.push({name:"single-device-group",params:{id:t.target.getExtData()}})})}),t.add(n)}else a.markerList=[[119.209927,36.725914]]})},handleSubmit:function(){console.log("查询")},jump:function(){this.map.setCenter([117,40])},fullSreen:function(){this.isFull=!this.isFull},handleClick:function(t){console.log(t)}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-device"},[a("div",{staticClass:"left"},[a("div",{staticClass:"left-head border"},[t._v("平台简介")]),t._v(" "),a("div",{staticClass:"left-device border"},t._l(t.deviceList,function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"item-left",style:{backgroundColor:e.bg}},[a("div",{class:["iconfont",e.icon],style:{color:e.color}})]),t._v(" "),a("div",{staticClass:"item-right"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"data"},[a("span",[t._v(t._s(e.value))]),t._v(" "),a("span",[t._v("/"+t._s(e.unit))])])])])}),0),t._v(" "),a("div",{staticClass:"left-enivronment border"},[t.showTitle?a("div",{staticClass:"title",on:{mouseenter:function(e){t.ChangeShow(1)}}},[t._v("\n        "+t._s(t.getName(t.chartId))+"\n      ")]):t._e(),t._v(" "),t.showTitle?t._e():a("div",{staticClass:"title",on:{mouseleave:function(e){t.ChangeShow(2)}}},[a("Select",{on:{"on-change":t.changeChart},model:{value:t.chartId,callback:function(e){t.chartId=e},expression:"chartId"}},t._l(t.chartOptions,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),1)],1),t._v(" "),a("div",{staticClass:"chart",staticStyle:{width:"100%",height:"200px"},attrs:{id:"chart"}})]),t._v(" "),a("div",{staticClass:"left-danger"},[a("div",{staticClass:"title"},[t._v("故障告警")]),t._v(" "),a("div",{staticClass:"left-dangertable"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{stripe:"",loading:t.loading.dangerTable,columns:t.dangerTableColumns,"highlight-row":"",height:"200",data:t.dangerTableData}})],1)])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{class:["right-monitor",t.isFull?"active":""]},[a("div",{staticClass:"right-head"},[a("div",{staticClass:"right-head-left"},[t._v("实时监测")]),t._v(" "),a("div",{staticClass:"right-head-right"},[a("div",{staticClass:"full-screen"},[a("Button",{attrs:{type:"default","custom-icon":"iconfont icon-tiaozhuanmianban"},on:{click:t.fullSreen}},[t._v(t._s(t.isFull?"退出全屏":"全屏"))])],1)])]),t._v(" "),a("div",{staticClass:"right-screen",attrs:{id:"map"}},[t.showModal?a("div",{staticClass:"modal"},[a("Icon",{staticStyle:{animation:"ani-demo-spin 1s linear infinite"},attrs:{type:"ios-loading"}})],1):t._e()])]),t._v(" "),a("div",{staticClass:"right-target"},[a("div",{staticClass:"right-target-item right-target-financial"},[a("div",{staticClass:"label"},[t._v("经济指标")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.financialList,function(e){return a("div",{key:e.id,staticClass:"content-item"},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"value"},[a("span",{staticClass:"num"},[t._v(t._s(e.num))]),t._v(" "),a("span",{staticClass:"symbol"},[t._v("/"+t._s(e.symbol))])])])}),0)]),t._v(" "),a("div",{staticClass:"right-target-item right-target-performence"},[a("div",{staticClass:"label"},[t._v("性能指标")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.performenceList,function(e){return a("div",{key:e.id,staticClass:"content-item"},[a("div",{staticClass:"icon",style:{backgroundColor:e.bg}},[a("span",{class:["iconfont",e.icon],style:{color:e.color}})]),t._v(" "),a("div",{staticClass:"data"},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"value"},[a("span",{staticClass:"num"},[t._v(t._s(e.num))]),t._v(" "),a("span",{staticClass:"symbol"},[t._v("/%")])])])])}),0)]),t._v(" "),a("div",{staticClass:"right-target-item right-target-reliable"},[a("div",{staticClass:"label"},[t._v("可靠性指标")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.reliableList,function(e){return a("div",{key:e.id,staticClass:"content-item"},[a("div",{staticClass:"icon",style:{backgroundColor:e.bg}},[a("span",{class:["iconfont",e.icon],style:{color:e.color}})]),t._v(" "),a("div",{staticClass:"data"},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"value"},[a("span",{staticClass:"num"},[t._v(t._s(e.num))]),t._v(" "),a("span",{staticClass:"symbol"},[t._v(t._s(e.symbol))])])])])}),0)])])])])},staticRenderFns:[]};var g=a("VU/8")(v,h,!1,function(t){a("Uo+5")},"data-v-08e4e3ee",null).exports,f=a("Dd8w"),m=a.n(f),b={name:"detail-target",components:{customChart:a("ooO1").a},data:function(){return{tab:1,chartList:[],deviceId:0,deviceList:[]}},mounted:function(){this.changeTab(1)},methods:{changeTab:function(t){var e=this;this.tab=t,this.init(),setTimeout(function(){e.changeData(t)})},init:function(){this.chartList=[]},changeData:function(t){this.getDatas(t)},getDatas:function(t){var e=this,a=this.deviceId,i=this.getType(t);Object(u.n)({deviceId:a,fieldType:i}).then(function(t){200===t.code?e.chartList=t.data.indexs.map(function(t){return console.log(t.value),{title:t.title,type:"line",xAxis:{key:"x"},yAxis:{symbol:t.unit},legend:t.legend.map(function(t,a){return m()({},t,{color:e.getColor(a)})}),value:t.value}}):(e.chartList=[],e.$Message.warning(t.msg))})},getColor:function(t){switch(t){case 0:return"#0084FF";case 1:return"#1CC96C";case 2:return"#b6a2de";case 3:return"#ffb980"}},getType:function(t){switch(t){case 1:return"ECONOMY";case 2:return"PERFORMANCE";case 3:return"RELIABILITY"}}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-target"},[a("div",{staticClass:"common-flex"},[a("div",{staticClass:"btnGroup"},[a("div",{style:{backgroundColor:1===t.tab?"#0084FF":"#000",color:1===t.tab?"#fff":"rgba(255,255,255,0.6)"},on:{click:function(e){t.changeTab(1)}}},[t._v("经济指标")]),t._v(" "),a("div",{style:{backgroundColor:2===t.tab?"#0084FF":"#000",color:2===t.tab?"#fff":"rgba(255,255,255,0.6)"},on:{click:function(e){t.changeTab(2)}}},[t._v("性能指标")]),t._v(" "),a("div",{style:{backgroundColor:3===t.tab?"#0084FF":"#000",color:3===t.tab?"#fff":"rgba(255,255,255,0.6)"},on:{click:function(e){t.changeTab(3)}}},[t._v("可靠性指标")])])]),t._v(" "),a("div",{staticClass:"card-group"},t._l(t.chartList,function(e,i){return a("div",{key:i,staticClass:"card"},[a("div",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"chart-container"},[a("custom-chart",t._b({attrs:{data:e.value,id:i,height:280}},"custom-chart",e,!1))],1)])}),0)])},staticRenderFns:[]};var p=a("VU/8")(b,_,!1,function(t){a("bZkn")},"data-v-e1d1bd34",null).exports,C=a("CCvC"),y={name:"platform",components:{tab:i.a,singleDevice:g,detailTarget:p},mixins:[C.a],data:function(){return{tabList:[{id:1,name:"平台概况",com:g},{id:2,name:"统计指标",com:p}],tabIndex:0,is:null}},created:function(){this.is=this.tabList[this.tabIndex].com},methods:{changeTab:function(t){console.log(t),this.tabIndex=t,this.is=this.tabList[t].com}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"platform"},[e("tab",{attrs:{data:this.tabList,current:this.tabIndex},on:{change:this.changeTab}}),this._v(" "),e("div",{staticClass:"content"},[e("transition",{attrs:{"enter-active-class":this.routerTransitionClass.enter,"leave-active-class":this.routerTransitionClass.leave}},[e(this.is,{tag:"component"})],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(y,T,!1,function(t){a("PHYg")},"data-v-18c71e38",null).exports;e.default=I},PHYg:function(t,e){},"Uo+5":function(t,e){},bZkn:function(t,e){}});
//# sourceMappingURL=13.855b374ffd2d3e4cd209.js.map