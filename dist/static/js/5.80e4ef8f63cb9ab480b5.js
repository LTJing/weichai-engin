webpackJsonp([5],{"4NlO":function(e,t){},"6hRn":function(e,t){},Cdx3:function(e,t,a){var n=a("sB3e"),o=a("lktj");a("uqUo")("keys",function(){return function(e){return o(n(e))}})},fZjL:function(e,t,a){e.exports={default:a("jFbC"),__esModule:!0}},jFbC:function(e,t,a){a("Cdx3"),e.exports=a("FeBl").Object.keys},nSZS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),o=a.n(n),l=a("STSY"),s={name:"role-list",data:function(){var e=this;return{formFilter:{},serLoading:!1,tableColumns:[{title:"角色名称",key:"roleName",align:"left"},{title:"角色类型",key:"name",align:"left"},{title:"角色描述",key:"remark",align:"left"},{title:"操作",key:"action",width:200,align:"left",render:function(t,a){return t("div",[t("span",{style:{color:"rgba(0, 132, 255, 1)",cursor:"pointer"},on:{click:function(){e.editRole(a)}}},"编辑"),t("span",{style:{color:"rgba(241, 33, 33, 1)",cursor:"pointer"},class:"secondary",on:{click:function(){e.deleteRole(a.row)}}},"删除")])}}],tableData:[],pageInfo:{pageIndex:1,pageSize:10,totalElements:0}}},methods:{showColumn:function(){this.$hasAccess("role.edit")||this.$hasAccess("role.del")||this.tableColumns.splice(this.tableColumns.length-1,1)},loadTableData:function(e){var t=this;e&&(this.pageInfo.pageIndex=1),this.serLoading=!0,Object(l.g)({pageNumber:this.pageInfo.pageIndex,pageSize:this.pageInfo.pageSize,name:this.formFilter.name,roleType:this.formFilter.roleType}).then(function(e){t.serLoading=!1,t.tableData=(e.data.result||[]).map(function(e){return o()({},e)}),t.tableData.map(function(e){var t=e;return 1===e.roleType?t.name="管理者":2===e.roleType?t.name="运营人员":3===e.roleType?t.name="服务人员":4===e.roleType&&(t.name="生产人员"),t}),t.pageInfo.totalElements=e.data.totalElements||0})},onPaginationChange:function(e){this.pageInfo.pageIndex=e,this.loadTableData(!1)},onPaginationSizeChange:function(e){this.pageInfo.pageSize=e,this.loadTableData(!0)},editRole:function(e){var t=this.tableData[e.index];this.$router.push({name:"role-edit",params:{roleId:t.roleId}})},deleteRole:function(e){var t=this;this.$Modal.confirm({title:this.$t("common.text.prompt"),width:this.$flexible(450),content:"确认删除角色名为["+e.roleName+"]的角色名吗?",onOk:function(){Object(l.b)({roleId:e.roleId}).then(function(e){200===e.code?(t.$Message.success(t.$t("common.message.delete_success")),t.loadTableData()):t.$Message.warning(t.$t("common.message.delete_fail"))})}})}},mounted:function(){this.loadTableData(!0),this.showColumn()},components:{RoleTypeSelect:a("vZEL").a}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-list"},[a("div",{staticClass:"content"},[e._m(0),e._v(" "),a("div",{staticClass:"filter-search"},[a("div",{staticClass:"filter-search-left"},[a("div",{staticClass:"filter-input mr-12"},[a("Input",{attrs:{placeholder:"请输入角色名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loadTableData(t):null}},model:{value:e.formFilter.name,callback:function(t){e.$set(e.formFilter,"name",t)},expression:"formFilter.name"}})],1),e._v(" "),a("div",{staticClass:"filter-select mr-12"},[a("RoleTypeSelect",{attrs:{show:!0,placeholder:"请选择角色类型"},model:{value:e.formFilter.roleType,callback:function(t){e.$set(e.formFilter,"roleType",t)},expression:"formFilter.roleType"}})],1),e._v(" "),a("div",{staticClass:"filter-btn"},[a("Button",{attrs:{type:"default",loading:e.pageInfo.loading},on:{click:e.loadTableData}},[a("span",{staticClass:"iconfont icon-chazhao"})])],1)]),e._v(" "),a("div",{staticClass:"filter-search-right"},[a("span",{staticClass:"t-btn"},[a("Button",{on:{click:function(t){e.$router.push({name:"role-new"})}}},[a("span",{staticClass:"iconfont icon-a-lianhe68"}),e._v("\n            新增\n          ")])],1)])]),e._v(" "),a("div",{staticClass:"user-table"},[a("Table",{staticClass:"m-table no-scroll no-border",attrs:{"row-class-name":function(e,t){return t%2==1?"even":""},loading:e.serLoading,stripe:"",columns:e.tableColumns,data:e.tableData}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{current:e.pageInfo.pageIndex,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalElements,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.onPaginationChange,"on-page-size-change":e.onPaginationSizeChange}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-sub"},[t("div",{staticClass:"title"},[t("div",{staticClass:"breadcrumb-item-link"},[this._v("角色列表")]),this._v(" "),t("span",{staticClass:"empty"})])])}]};var r=a("VU/8")(s,i,!1,function(e){a("res/"),a("6hRn")},"data-v-4f447ff7",null).exports;t.default=r},"res/":function(e,t){},vZEL:function(e,t,a){"use strict";var n=a("fZjL"),o=a.n(n),l=a("BTaQ"),s=a("ErfN"),i={name:"role-type-select",data:function(){return{options:[]}},props:{value:String,placeholder:String,show:Boolean},model:{prop:"value",event:"selection"},methods:{loadTreeData:function(){this.options=o()(s.b).map(function(e){return{value:e,label:s.b[e]}})},onSelectionChange:function(e){this.$emit("selection",e),this.$emit("on-selection-change",e)}},mounted:function(){this.loadTreeData()},components:{Select:l.Select}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticClass:"role-select",attrs:{value:e.value,placeholder:e.placeholder},on:{input:e.onSelectionChange}},[a("Option",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],key:"-1",attrs:{value:""}},[e._v(e._s(e.$t("common.text.all")))]),e._v(" "),e._l(e.options,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})],2)},staticRenderFns:[]};var c=a("VU/8")(i,r,!1,function(e){a("4NlO")},"data-v-b8322b40",null).exports;t.a=c}});
//# sourceMappingURL=5.80e4ef8f63cb9ab480b5.js.map